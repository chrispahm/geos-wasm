import t from"util";const e={Module:{}};let r=/[-+]?([0-9]*\.[0-9]+|[0-9]+)([eE][-+]?[0-9]+)?/,n=new RegExp("^"+r.source+"(\\s"+r.source+"){1,}");const o=t=>{function e(t){return t.join(" ")}function r(t){return t.map(e).join(", ")}function n(t){return t.map(r).map(a).join(", ")}function i(t){return t.map(n).map(a).join(", ")}function a(t){return"("+t+")"}"Feature"===t.type&&(t=t.geometry);let s=t;switch(s.type){case"Point":return s.coordinates&&3===s.coordinates.length?"POINT Z ("+e(s.coordinates)+")":"POINT ("+e(s.coordinates)+")";case"LineString":return s.coordinates&&s.coordinates[0]&&3===s.coordinates[0].length?"LINESTRING Z ("+r(s.coordinates)+")":"LINESTRING ("+r(s.coordinates)+")";case"Polygon":return s.coordinates&&s.coordinates[0]&&s.coordinates[0][0]&&3===s.coordinates[0][0].length?"POLYGON Z ("+n(s.coordinates)+")":"POLYGON ("+n(s.coordinates)+")";case"MultiPoint":return s.coordinates&&s.coordinates[0]&&3===s.coordinates[0].length?"MULTIPOINT Z ("+r(s.coordinates)+")":"MULTIPOINT ("+r(s.coordinates)+")";case"MultiLineString":return s.coordinates&&s.coordinates[0]&&s.coordinates[0][0]&&3===s.coordinates[0][0].length?"MULTILINESTRING Z ("+n(s.coordinates)+")":"MULTILINESTRING ("+n(s.coordinates)+")";case"MultiPolygon":return s.coordinates&&s.coordinates[0]&&s.coordinates[0][0]&&s.coordinates[0][0]&&3===s.coordinates[0][0][0].length?"MULTIPOLYGON Z ("+i(s.coordinates)+")":"MULTIPOLYGON ("+i(s.coordinates)+")";case"GeometryCollection":return"GEOMETRYCOLLECTION ("+s.geometries.map(o).join(", ")+")";default:throw new Error("stringify requires a valid GeoJSON Feature or geometry object as input")}};var i={parse:t=>{let e=t.split(";"),r=e.pop(),o=(e.shift()||"").split("=").pop(),i=0;function a(t){let e=r.substring(i).match(t);return e?(i+=e[0].length,e[0]):null}function s(){a(/^\s*/)}function u(){s();let t,e=0,r=[],o=[r],i=r;for(;t=a(/^(\()/)||a(/^(\))/)||a(/^(,)/)||a(n);){if("("===t)o.push(i),i=[],o[o.length-1].push(i),e++;else if(")"===t){if(0===i.length)return null;if(i=o.pop(),!i)return null;if(e--,0===e)break}else if(","===t)i=[],o[o.length-1].push(i);else{if(t.split(/\s/g).some(isNaN))return null;Array.prototype.push.apply(i,t.split(/\s/g).map(parseFloat))}s()}return 0!==e?null:r}function l(){let t,e,r=[];for(;e=a(n)||a(/^(,)/);)","===e?(r.push(t),t=[]):e.split(/\s/g).some(isNaN)||(t||(t=[]),Array.prototype.push.apply(t,e.split(/\s/g).map(parseFloat))),s();return t?(r.push(t),r.length?r:null):null}function c(){return function(){if(!a(/^(point(\sz)?)/i))return null;if(s(),!a(/^(\()/))return null;let t=l();return t?(s(),a(/^(\))/)?{type:"Point",coordinates:t[0]}:null):null}()||function(){if(!a(/^(linestring(\sz)?)/i))return null;if(s(),!a(/^(\()/))return null;let t=l();return t&&a(/^(\))/)?{type:"LineString",coordinates:t}:null}()||function(){if(!a(/^(polygon(\sz)?)/i))return null;s();let t=u();return t?{type:"Polygon",coordinates:t}:null}()||function(){if(!a(/^(multipoint(\sz)?)/i))return null;s();let t=r.substring(r.indexOf("(")+1,r.length-1).replace(/\(/g,"").replace(/\)/g,"");r="MULTIPOINT ("+t+")";let e=u();return e?(s(),{type:"MultiPoint",coordinates:e}):null}()||function(){if(!a(/^(multilinestring(\sz)?)/i))return null;s();let t=u();return t?(s(),{type:"MultiLineString",coordinates:t}):null}()||function(){if(!a(/^(multipolygon(\sz)?)/i))return null;s();let t=u();return t?{type:"MultiPolygon",coordinates:t}:null}()||function(){let t,e=[];if(!a(/^(geometrycollection)/i))return null;if(s(),!a(/^(\()/))return null;for(;t=c();)e.push(t),s(),a(/^(,)/),s();return a(/^(\))/)?{type:"GeometryCollection",geometries:e}:null}()}return(f=c())&&o.match(/\d+/)&&(f.crs={type:"name",properties:{name:"urn:ogc:def:crs:EPSG::"+o}}),f;var f},stringify:o};function a(t){const r=e.Module._malloc(t.length+1);e.Module.stringToUTF8(t,r,t.length+1);const n=e.GEOSGeomFromWKT(r);return e.GEOSFree(r),n}function s(t){const r=e.GEOSGeomToWKT(t),n=e.Module.UTF8ToString(r);return e.GEOSFree(r),e.GEOSGeom_destroy(t),n}function u(t){return a(i.stringify(t))}function l(t,e){const r=s(t),n=i.parse(r);return e.geometry?e.geometry=n:e=n,e}var c=6371008.8,f={centimeters:100*c,centimetres:100*c,degrees:c/111325,feet:3.28084*c,inches:39.37*c,kilometers:c/1e3,kilometres:c/1e3,meters:c,metres:c,miles:c/1609.344,millimeters:1e3*c,millimetres:1e3*c,nauticalmiles:c/1852,radians:1,yards:1.0936*c};function h(t,e,r){void 0===r&&(r={});var n={type:"Feature"};return(0===r.id||r.id)&&(n.id=r.id),r.bbox&&(n.bbox=r.bbox),n.properties=e||{},n.geometry=t,n}function p(t,e){void 0===e&&(e={});var r={type:"FeatureCollection"};return e.id&&(r.id=e.id),e.bbox&&(r.bbox=e.bbox),r.features=t,r}function d(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function m(t,e,r){if(null!==t)for(var n,o,i,a,s,u,l,c,f=0,h=0,p=t.type,d="FeatureCollection"===p,g="Feature"===p,w=d?t.features.length:1,y=0;y<w;y++){s=(c=!!(l=d?t.features[y].geometry:g?t.geometry:t)&&"GeometryCollection"===l.type)?l.geometries.length:1;for(var E=0;E<s;E++){var v=0,_=0;if(null!==(a=c?l.geometries[E]:l)){u=a.coordinates;var S=a.type;switch(f=!r||"Polygon"!==S&&"MultiPolygon"!==S?0:1,S){case null:break;case"Point":if(!1===e(u,h,y,v,_))return!1;h++,v++;break;case"LineString":case"MultiPoint":for(n=0;n<u.length;n++){if(!1===e(u[n],h,y,v,_))return!1;h++,"MultiPoint"===S&&v++}"LineString"===S&&v++;break;case"Polygon":case"MultiLineString":for(n=0;n<u.length;n++){for(o=0;o<u[n].length-f;o++){if(!1===e(u[n][o],h,y,v,_))return!1;h++}"MultiLineString"===S&&v++,"Polygon"===S&&_++}"Polygon"===S&&v++;break;case"MultiPolygon":for(n=0;n<u.length;n++){for(_=0,o=0;o<u[n].length;o++){for(i=0;i<u[n][o].length-f;i++){if(!1===e(u[n][o][i],h,y,v,_))return!1;h++}_++}v++}break;case"GeometryCollection":for(n=0;n<a.geometries.length;n++)if(!1===m(a.geometries[n],e,r))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function g(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var r=0;r<t.features.length&&!1!==e(t.features[r],r);r++);}function w(t,e){var r,n,o,i,a,s,u,l,c,f,h=0,p="FeatureCollection"===t.type,d="Feature"===t.type,m=p?t.features.length:1;for(r=0;r<m;r++){for(s=p?t.features[r].geometry:d?t.geometry:t,l=p?t.features[r].properties:d?t.properties:{},c=p?t.features[r].bbox:d?t.bbox:void 0,f=p?t.features[r].id:d?t.id:void 0,a=(u=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,o=0;o<a;o++)if(null!==(i=u?s.geometries[o]:s))switch(i.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(i,h,l,c,f))return!1;break;case"GeometryCollection":for(n=0;n<i.geometries.length;n++)if(!1===e(i.geometries[n],h,l,c,f))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,h,l,c,f))return!1;h++}}function y(t){var e=[1/0,1/0,-1/0,-1/0];return m(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}function E(t,e){void 0===e&&(e={});var r=y(t);return function(t,e,r){if(void 0===r&&(r={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!d(t[0])||!d(t[1]))throw new Error("coordinates must contain numbers");return h({type:"Point",coordinates:t},e,r)}([(r[0]+r[2])/2,(r[1]+r[3])/2],e.properties,e)}y.default=y;class v{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const e=this._partials;let r=0;for(let n=0;n<this._n&&n<32;n++){const o=e[n],i=t+o,a=Math.abs(t)<Math.abs(o)?t-(i-o):o-(i-t);a&&(e[r++]=a),t=i}return e[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let e,r,n,o=this._n,i=0;if(o>0){for(i=t[--o];o>0&&(e=i,r=t[--o],i=e+r,n=r-(i-e),!n););o>0&&(n<0&&t[o-1]<0||n>0&&t[o-1]>0)&&(r=2*n,e=i+r,r==e-i&&(i=e))}return i}}function _(t){return Array.from(function*(t){for(const e of t)yield*e}(t))}var S=1e-6,b=1e-12,k=Math.PI,M=k/2,O=k/4,P=2*k,N=180/k,G=k/180,T=Math.abs,I=Math.atan,F=Math.atan2,R=Math.cos,L=Math.sin,D=Math.sign||function(t){return t>0?1:t<0?-1:0},x=Math.sqrt;function B(t){return t>1?0:t<-1?k:Math.acos(t)}function W(t){return t>1?M:t<-1?-M:Math.asin(t)}function C(){}function Z(t,e){t&&z.hasOwnProperty(t.type)&&z[t.type](t,e)}var A={Feature:function(t,e){Z(t.geometry,e)},FeatureCollection:function(t,e){for(var r=t.features,n=-1,o=r.length;++n<o;)Z(r[n].geometry,e)}},z={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var r=t.coordinates,n=-1,o=r.length;++n<o;)t=r[n],e.point(t[0],t[1],t[2])},LineString:function(t,e){U(t.coordinates,e,0)},MultiLineString:function(t,e){for(var r=t.coordinates,n=-1,o=r.length;++n<o;)U(r[n],e,0)},Polygon:function(t,e){j(t.coordinates,e)},MultiPolygon:function(t,e){for(var r=t.coordinates,n=-1,o=r.length;++n<o;)j(r[n],e)},GeometryCollection:function(t,e){for(var r=t.geometries,n=-1,o=r.length;++n<o;)Z(r[n],e)}};function U(t,e,r){var n,o=-1,i=t.length-r;for(e.lineStart();++o<i;)n=t[o],e.point(n[0],n[1],n[2]);e.lineEnd()}function j(t,e){var r=-1,n=t.length;for(e.polygonStart();++r<n;)U(t[r],e,1);e.polygonEnd()}function J(t){return[F(t[1],t[0]),W(t[2])]}function H(t){var e=t[0],r=t[1],n=R(r);return[n*R(e),n*L(e),L(r)]}function V(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Y(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function K(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function q(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function X(t){var e=x(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function $(t,e){function r(r,n){return r=t(r,n),e(r[0],r[1])}return t.invert&&e.invert&&(r.invert=function(r,n){return(r=e.invert(r,n))&&t.invert(r[0],r[1])}),r}function Q(t,e){return T(t)>k&&(t-=Math.round(t/P)*P),[t,e]}function tt(t){return function(e,r){return T(e+=t)>k&&(e-=Math.round(e/P)*P),[e,r]}}function et(t){var e=tt(t);return e.invert=tt(-t),e}function rt(t,e){var r=R(t),n=L(t),o=R(e),i=L(e);function a(t,e){var a=R(e),s=R(t)*a,u=L(t)*a,l=L(e),c=l*r+s*n;return[F(u*o-c*i,s*r-l*n),W(c*o+u*i)]}return a.invert=function(t,e){var a=R(e),s=R(t)*a,u=L(t)*a,l=L(e),c=l*o-u*i;return[F(u*o+l*i,s*r+c*n),W(c*r-s*n)]},a}function nt(t,e){(e=H(e))[0]-=t,X(e);var r=B(-e[1]);return((-e[2]<0?-r:r)+P-S)%P}function ot(){var t,e=[];return{point:function(e,r,n){t.push([e,r,n])},lineStart:function(){e.push(t=[])},lineEnd:C,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var r=e;return e=[],t=null,r}}}function it(t,e){return T(t[0]-e[0])<S&&T(t[1]-e[1])<S}function at(t,e,r,n){this.x=t,this.z=e,this.o=r,this.e=n,this.v=!1,this.n=this.p=null}function st(t,e,r,n,o){var i,a,s=[],u=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,r,n=t[0],a=t[e];if(it(n,a)){if(!n[2]&&!a[2]){for(o.lineStart(),i=0;i<e;++i)o.point((n=t[i])[0],n[1]);return void o.lineEnd()}a[0]+=2*S}s.push(r=new at(n,t,null,!0)),u.push(r.o=new at(n,null,r,!1)),s.push(r=new at(a,t,null,!1)),u.push(r.o=new at(a,null,r,!0))}})),s.length){for(u.sort(e),ut(s),ut(u),i=0,a=u.length;i<a;++i)u[i].e=r=!r;for(var l,c,f=s[0];;){for(var h=f,p=!0;h.v;)if((h=h.n)===f)return;l=h.z,o.lineStart();do{if(h.v=h.o.v=!0,h.e){if(p)for(i=0,a=l.length;i<a;++i)o.point((c=l[i])[0],c[1]);else n(h.x,h.n.x,1,o);h=h.n}else{if(p)for(l=h.p.z,i=l.length-1;i>=0;--i)o.point((c=l[i])[0],c[1]);else n(h.x,h.p.x,-1,o);h=h.p}l=(h=h.o).z,p=!p}while(!h.v);o.lineEnd()}}}function ut(t){if(e=t.length){for(var e,r,n=0,o=t[0];++n<e;)o.n=r=t[n],r.p=o,o=r;o.n=r=t[0],r.p=o}}function lt(t){return T(t[0])<=k?t[0]:D(t[0])*((T(t[0])+k)%P-k)}function ct(t,e,r,n){return function(o){var i,a,s,u=e(o),l=ot(),c=e(l),f=!1,h={point:p,lineStart:m,lineEnd:g,polygonStart:function(){h.point=w,h.lineStart=y,h.lineEnd=E,a=[],i=[]},polygonEnd:function(){h.point=p,h.lineStart=m,h.lineEnd=g,a=_(a);var t=function(t,e){var r=lt(e),n=e[1],o=L(n),i=[L(r),-R(r),0],a=0,s=0,u=new v;1===o?n=M+S:-1===o&&(n=-M-S);for(var l=0,c=t.length;l<c;++l)if(h=(f=t[l]).length)for(var f,h,p=f[h-1],d=lt(p),m=p[1]/2+O,g=L(m),w=R(m),y=0;y<h;++y,d=_,g=G,w=T,p=E){var E=f[y],_=lt(E),N=E[1]/2+O,G=L(N),T=R(N),I=_-d,D=I>=0?1:-1,x=D*I,B=x>k,C=g*G;if(u.add(F(C*D*L(x),w*T+C*R(x))),a+=B?I+D*P:I,B^d>=r^_>=r){var Z=Y(H(p),H(E));X(Z);var A=Y(i,Z);X(A);var z=(B^I>=0?-1:1)*W(A[2]);(n>z||n===z&&(Z[0]||Z[1]))&&(s+=B^I>=0?1:-1)}}return(a<-S||a<S&&u<-b)^1&s}(i,n);a.length?(f||(o.polygonStart(),f=!0),st(a,ht,t,r,o)):t&&(f||(o.polygonStart(),f=!0),o.lineStart(),r(null,null,1,o),o.lineEnd()),f&&(o.polygonEnd(),f=!1),a=i=null},sphere:function(){o.polygonStart(),o.lineStart(),r(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function p(e,r){t(e,r)&&o.point(e,r)}function d(t,e){u.point(t,e)}function m(){h.point=d,u.lineStart()}function g(){h.point=p,u.lineEnd()}function w(t,e){s.push([t,e]),c.point(t,e)}function y(){c.lineStart(),s=[]}function E(){w(s[0][0],s[0][1]),c.lineEnd();var t,e,r,n,u=c.clean(),h=l.result(),p=h.length;if(s.pop(),i.push(s),s=null,p)if(1&u){if((e=(r=h[0]).length-1)>0){for(f||(o.polygonStart(),f=!0),o.lineStart(),t=0;t<e;++t)o.point((n=r[t])[0],n[1]);o.lineEnd()}}else p>1&&2&u&&h.push(h.pop().concat(h.shift())),a.push(h.filter(ft))}return h}}function ft(t){return t.length>1}function ht(t,e){return((t=t.x)[0]<0?t[1]-M-S:M-t[1])-((e=e.x)[0]<0?e[1]-M-S:M-e[1])}Q.invert=Q;var pt=ct((function(){return!0}),(function(t){var e,r=NaN,n=NaN,o=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(i,a){var s=i>0?k:-k,u=T(i-r);T(u-k)<S?(t.point(r,n=(n+a)/2>0?M:-M),t.point(o,n),t.lineEnd(),t.lineStart(),t.point(s,n),t.point(i,n),e=0):o!==s&&u>=k&&(T(r-o)<S&&(r-=o*S),T(i-s)<S&&(i-=s*S),n=function(t,e,r,n){var o,i,a=L(t-r);return T(a)>S?I((L(e)*(i=R(n))*L(r)-L(n)*(o=R(e))*L(t))/(o*i*a)):(e+n)/2}(r,n,i,a),t.point(o,n),t.lineEnd(),t.lineStart(),t.point(s,n),e=0),t.point(r=i,n=a),o=s},lineEnd:function(){t.lineEnd(),r=n=NaN},clean:function(){return 2-e}}}),(function(t,e,r,n){var o;if(null==t)o=r*M,n.point(-k,o),n.point(0,o),n.point(k,o),n.point(k,0),n.point(k,-o),n.point(0,-o),n.point(-k,-o),n.point(-k,0),n.point(-k,o);else if(T(t[0]-e[0])>S){var i=t[0]<e[0]?k:-k;o=r*i/2,n.point(-i,o),n.point(0,o),n.point(i,o)}else n.point(e[0],e[1])}),[-k,-M]);function dt(t){var e=R(t),r=6*G,n=e>0,o=T(e)>S;function i(t,r){return R(t)*R(r)>e}function a(t,r,n){var o=[1,0,0],i=Y(H(t),H(r)),a=V(i,i),s=i[0],u=a-s*s;if(!u)return!n&&t;var l=e*a/u,c=-e*s/u,f=Y(o,i),h=q(o,l);K(h,q(i,c));var p=f,d=V(h,p),m=V(p,p),g=d*d-m*(V(h,h)-1);if(!(g<0)){var w=x(g),y=q(p,(-d-w)/m);if(K(y,h),y=J(y),!n)return y;var E,v=t[0],_=r[0],b=t[1],M=r[1];_<v&&(E=v,v=_,_=E);var O=_-v,P=T(O-k)<S;if(!P&&M<b&&(E=b,b=M,M=E),P||O<S?P?b+M>0^y[1]<(T(y[0]-v)<S?b:M):b<=y[1]&&y[1]<=M:O>k^(v<=y[0]&&y[0]<=_)){var N=q(p,(-d+w)/m);return K(N,h),[y,J(N)]}}}function s(e,r){var o=n?t:k-t,i=0;return e<-o?i|=1:e>o&&(i|=2),r<-o?i|=4:r>o&&(i|=8),i}return ct(i,(function(t){var e,r,u,l,c;return{lineStart:function(){l=u=!1,c=1},point:function(f,h){var p,d=[f,h],m=i(f,h),g=n?m?0:s(f,h):m?s(f+(f<0?k:-k),h):0;if(!e&&(l=u=m)&&t.lineStart(),m!==u&&(!(p=a(e,d))||it(e,p)||it(d,p))&&(d[2]=1),m!==u)c=0,m?(t.lineStart(),p=a(d,e),t.point(p[0],p[1])):(p=a(e,d),t.point(p[0],p[1],2),t.lineEnd()),e=p;else if(o&&e&&n^m){var w;g&r||!(w=a(d,e,!0))||(c=0,n?(t.lineStart(),t.point(w[0][0],w[0][1]),t.point(w[1][0],w[1][1]),t.lineEnd()):(t.point(w[1][0],w[1][1]),t.lineEnd(),t.lineStart(),t.point(w[0][0],w[0][1],3)))}!m||e&&it(e,d)||t.point(d[0],d[1]),e=d,u=m,r=g},lineEnd:function(){u&&t.lineEnd(),e=null},clean:function(){return c|(l&&u)<<1}}}),(function(e,n,o,i){!function(t,e,r,n,o,i){if(r){var a=R(e),s=L(e),u=n*r;null==o?(o=e+n*P,i=e-u/2):(o=nt(a,o),i=nt(a,i),(n>0?o<i:o>i)&&(o+=n*P));for(var l,c=o;n>0?c>i:c<i;c-=u)l=J([a,-s*R(c),-s*L(c)]),t.point(l[0],l[1])}}(i,t,r,o,e,n)}),n?[0,-t]:[-k,t-k])}var mt=1e9,gt=-mt;function wt(t,e,r,n){function o(o,i){return t<=o&&o<=r&&e<=i&&i<=n}function i(o,i,s,l){var c=0,f=0;if(null==o||(c=a(o,s))!==(f=a(i,s))||u(o,i)<0^s>0)do{l.point(0===c||3===c?t:r,c>1?n:e)}while((c=(c+s+4)%4)!==f);else l.point(i[0],i[1])}function a(n,o){return T(n[0]-t)<S?o>0?0:3:T(n[0]-r)<S?o>0?2:1:T(n[1]-e)<S?o>0?1:0:o>0?3:2}function s(t,e){return u(t.x,e.x)}function u(t,e){var r=a(t,1),n=a(e,1);return r!==n?r-n:0===r?e[1]-t[1]:1===r?t[0]-e[0]:2===r?t[1]-e[1]:e[0]-t[0]}return function(a){var u,l,c,f,h,p,d,m,g,w,y,E=a,v=ot(),S={point:b,lineStart:function(){S.point=k,l&&l.push(c=[]);w=!0,g=!1,d=m=NaN},lineEnd:function(){u&&(k(f,h),p&&g&&v.rejoin(),u.push(v.result()));S.point=b,g&&E.lineEnd()},polygonStart:function(){E=v,u=[],l=[],y=!0},polygonEnd:function(){var e=function(){for(var e=0,r=0,o=l.length;r<o;++r)for(var i,a,s=l[r],u=1,c=s.length,f=s[0],h=f[0],p=f[1];u<c;++u)i=h,a=p,h=(f=s[u])[0],p=f[1],a<=n?p>n&&(h-i)*(n-a)>(p-a)*(t-i)&&++e:p<=n&&(h-i)*(n-a)<(p-a)*(t-i)&&--e;return e}(),r=y&&e,o=(u=_(u)).length;(r||o)&&(a.polygonStart(),r&&(a.lineStart(),i(null,null,1,a),a.lineEnd()),o&&st(u,s,e,i,a),a.polygonEnd());E=a,u=l=c=null}};function b(t,e){o(t,e)&&E.point(t,e)}function k(i,a){var s=o(i,a);if(l&&c.push([i,a]),w)f=i,h=a,p=s,w=!1,s&&(E.lineStart(),E.point(i,a));else if(s&&g)E.point(i,a);else{var u=[d=Math.max(gt,Math.min(mt,d)),m=Math.max(gt,Math.min(mt,m))],v=[i=Math.max(gt,Math.min(mt,i)),a=Math.max(gt,Math.min(mt,a))];!function(t,e,r,n,o,i){var a,s=t[0],u=t[1],l=0,c=1,f=e[0]-s,h=e[1]-u;if(a=r-s,f||!(a>0)){if(a/=f,f<0){if(a<l)return;a<c&&(c=a)}else if(f>0){if(a>c)return;a>l&&(l=a)}if(a=o-s,f||!(a<0)){if(a/=f,f<0){if(a>c)return;a>l&&(l=a)}else if(f>0){if(a<l)return;a<c&&(c=a)}if(a=n-u,h||!(a>0)){if(a/=h,h<0){if(a<l)return;a<c&&(c=a)}else if(h>0){if(a>c)return;a>l&&(l=a)}if(a=i-u,h||!(a<0)){if(a/=h,h<0){if(a>c)return;a>l&&(l=a)}else if(h>0){if(a<l)return;a<c&&(c=a)}return l>0&&(t[0]=s+l*f,t[1]=u+l*h),c<1&&(e[0]=s+c*f,e[1]=u+c*h),!0}}}}}(u,v,t,e,r,n)?s&&(E.lineStart(),E.point(i,a),y=!1):(g||(E.lineStart(),E.point(u[0],u[1])),E.point(v[0],v[1]),s||E.lineEnd(),y=!1)}d=i,m=a,g=s}return S}}var yt=t=>t,Et=1/0,vt=Et,_t=-Et,St=_t;var bt={point:function(t,e){t<Et&&(Et=t);t>_t&&(_t=t);e<vt&&(vt=e);e>St&&(St=e)},lineStart:C,lineEnd:C,polygonStart:C,polygonEnd:C,result:function(){var t=[[Et,vt],[_t,St]];return _t=St=-(vt=Et=1/0),t}};function kt(t){return function(e){var r=new Mt;for(var n in t)r[n]=t[n];return r.stream=e,r}}function Mt(){}function Ot(t,e,r){var n=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=n&&t.clipExtent(null),function(t,e){t&&A.hasOwnProperty(t.type)?A[t.type](t,e):Z(t,e)}(r,t.stream(bt)),e(bt.result()),null!=n&&t.clipExtent(n),t}function Pt(t,e,r){return Ot(t,(function(r){var n=e[1][0]-e[0][0],o=e[1][1]-e[0][1],i=Math.min(n/(r[1][0]-r[0][0]),o/(r[1][1]-r[0][1])),a=+e[0][0]+(n-i*(r[1][0]+r[0][0]))/2,s=+e[0][1]+(o-i*(r[1][1]+r[0][1]))/2;t.scale(150*i).translate([a,s])}),r)}Mt.prototype={constructor:Mt,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Nt=16,Gt=R(30*G);function Tt(t,e){return+e?function(t,e){function r(n,o,i,a,s,u,l,c,f,h,p,d,m,g){var w=l-n,y=c-o,E=w*w+y*y;if(E>4*e&&m--){var v=a+h,_=s+p,b=u+d,k=x(v*v+_*_+b*b),M=W(b/=k),O=T(T(b)-1)<S||T(i-f)<S?(i+f)/2:F(_,v),P=t(O,M),N=P[0],G=P[1],I=N-n,R=G-o,L=y*I-w*R;(L*L/E>e||T((w*I+y*R)/E-.5)>.3||a*h+s*p+u*d<Gt)&&(r(n,o,i,a,s,u,N,G,O,v/=k,_/=k,b,m,g),g.point(N,G),r(N,G,O,v,_,b,l,c,f,h,p,d,m,g))}}return function(e){var n,o,i,a,s,u,l,c,f,h,p,d,m={point:g,lineStart:w,lineEnd:E,polygonStart:function(){e.polygonStart(),m.lineStart=v},polygonEnd:function(){e.polygonEnd(),m.lineStart=w}};function g(r,n){r=t(r,n),e.point(r[0],r[1])}function w(){c=NaN,m.point=y,e.lineStart()}function y(n,o){var i=H([n,o]),a=t(n,o);r(c,f,l,h,p,d,c=a[0],f=a[1],l=n,h=i[0],p=i[1],d=i[2],Nt,e),e.point(c,f)}function E(){m.point=g,e.lineEnd()}function v(){w(),m.point=_,m.lineEnd=S}function _(t,e){y(n=t,e),o=c,i=f,a=h,s=p,u=d,m.point=y}function S(){r(c,f,l,h,p,d,o,i,n,a,s,u,Nt,e),m.lineEnd=E,E()}return m}}(t,e):function(t){return kt({point:function(e,r){e=t(e,r),this.stream.point(e[0],e[1])}})}(t)}var It=kt({point:function(t,e){this.stream.point(t*G,e*G)}});function Ft(t,e,r,n,o,i){if(!i)return function(t,e,r,n,o){function i(i,a){return[e+t*(i*=n),r-t*(a*=o)]}return i.invert=function(i,a){return[(i-e)/t*n,(r-a)/t*o]},i}(t,e,r,n,o);var a=R(i),s=L(i),u=a*t,l=s*t,c=a/t,f=s/t,h=(s*r-a*e)/t,p=(s*e+a*r)/t;function d(t,i){return[u*(t*=n)-l*(i*=o)+e,r-l*t-u*i]}return d.invert=function(t,e){return[n*(c*t-f*e+h),o*(p-f*t-c*e)]},d}function Rt(t){return function(t){var e,r,n,o,i,a,s,u,l,c,f=150,h=480,p=250,d=0,m=0,g=0,w=0,y=0,E=0,v=1,_=1,S=null,b=pt,k=null,M=yt,O=.5;function T(t){return u(t[0]*G,t[1]*G)}function I(t){return(t=u.invert(t[0],t[1]))&&[t[0]*N,t[1]*N]}function F(){var t=Ft(f,0,0,v,_,E).apply(null,e(d,m)),n=Ft(f,h-t[0],p-t[1],v,_,E);return r=function(t,e,r){return(t%=P)?e||r?$(et(t),rt(e,r)):et(t):e||r?rt(e,r):Q}(g,w,y),s=$(e,n),u=$(r,s),a=Tt(s,O),R()}function R(){return l=c=null,T}return T.stream=function(t){return l&&c===t?l:l=It(function(t){return kt({point:function(e,r){var n=t(e,r);return this.stream.point(n[0],n[1])}})}(r)(b(a(M(c=t)))))},T.preclip=function(t){return arguments.length?(b=t,S=void 0,R()):b},T.postclip=function(t){return arguments.length?(M=t,k=n=o=i=null,R()):M},T.clipAngle=function(t){return arguments.length?(b=+t?dt(S=t*G):(S=null,pt),R()):S*N},T.clipExtent=function(t){return arguments.length?(M=null==t?(k=n=o=i=null,yt):wt(k=+t[0][0],n=+t[0][1],o=+t[1][0],i=+t[1][1]),R()):null==k?null:[[k,n],[o,i]]},T.scale=function(t){return arguments.length?(f=+t,F()):f},T.translate=function(t){return arguments.length?(h=+t[0],p=+t[1],F()):[h,p]},T.center=function(t){return arguments.length?(d=t[0]%360*G,m=t[1]%360*G,F()):[d*N,m*N]},T.rotate=function(t){return arguments.length?(g=t[0]%360*G,w=t[1]%360*G,y=t.length>2?t[2]%360*G:0,F()):[g*N,w*N,y*N]},T.angle=function(t){return arguments.length?(E=t%360*G,F()):E*N},T.reflectX=function(t){return arguments.length?(v=t?-1:1,F()):v<0},T.reflectY=function(t){return arguments.length?(_=t?-1:1,F()):_<0},T.precision=function(t){return arguments.length?(a=Tt(s,O=t*t),R()):x(O)},T.fitExtent=function(t,e){return Pt(T,t,e)},T.fitSize=function(t,e){return function(t,e,r){return Pt(t,[[0,0],e],r)}(T,t,e)},T.fitWidth=function(t,e){return function(t,e,r){return Ot(t,(function(r){var n=+e,o=n/(r[1][0]-r[0][0]),i=(n-o*(r[1][0]+r[0][0]))/2,a=-o*r[0][1];t.scale(150*o).translate([i,a])}),r)}(T,t,e)},T.fitHeight=function(t,e){return function(t,e,r){return Ot(t,(function(r){var n=+e,o=n/(r[1][1]-r[0][1]),i=-o*r[0][0],a=(n-o*(r[1][1]+r[0][1]))/2;t.scale(150*o).translate([i,a])}),r)}(T,t,e)},function(){return e=t.apply(this,arguments),T.invert=e.invert&&I,F()}}((function(){return t}))()}var Lt,Dt,xt=(Lt=function(t){return(t=B(t))&&t/L(t)},function(t,e){var r=R(t),n=R(e),o=Lt(r*n);return o===1/0?[2,0]:[o*n*L(t),o*L(e)]});function Bt(){return Rt(xt).scale(79.4188).clipAngle(179.999)}xt.invert=(Dt=function(t){return t},function(t,e){var r=x(t*t+e*e),n=Dt(r),o=L(n),i=R(n);return[F(t*o,r*i),W(r&&e*o/r)]});var Wt={wkt:{Point:"POINT",LineString:"LINESTRING",Polygon:"POLYGON",MultiPoint:"MULTIPOINT",MultiLineString:"MULTILINESTRING",MultiPolygon:"MULTIPOLYGON",GeometryCollection:"GEOMETRYCOLLECTION"},wkb:{Point:1,LineString:2,Polygon:3,MultiPoint:4,MultiLineString:5,MultiPolygon:6,GeometryCollection:7},geoJSON:{Point:"Point",LineString:"LineString",Polygon:"Polygon",MultiPoint:"MultiPoint",MultiLineString:"MultiLineString",MultiPolygon:"MultiPolygon",GeometryCollection:"GeometryCollection"}},Ct=Zt;function Zt(t,e){this.buffer=new Buffer.alloc(t),this.position=0,this.allowResize=e}function At(t,e){return function(r,n){this.ensureSize(e),t.call(this.buffer,r,this.position,n),this.position+=e}}Zt.prototype.writeUInt8=At(Buffer.prototype.writeUInt8,1),Zt.prototype.writeUInt16LE=At(Buffer.prototype.writeUInt16LE,2),Zt.prototype.writeUInt16BE=At(Buffer.prototype.writeUInt16BE,2),Zt.prototype.writeUInt32LE=At(Buffer.prototype.writeUInt32LE,4),Zt.prototype.writeUInt32BE=At(Buffer.prototype.writeUInt32BE,4),Zt.prototype.writeInt8=At(Buffer.prototype.writeInt8,1),Zt.prototype.writeInt16LE=At(Buffer.prototype.writeInt16LE,2),Zt.prototype.writeInt16BE=At(Buffer.prototype.writeInt16BE,2),Zt.prototype.writeInt32LE=At(Buffer.prototype.writeInt32LE,4),Zt.prototype.writeInt32BE=At(Buffer.prototype.writeInt32BE,4),Zt.prototype.writeFloatLE=At(Buffer.prototype.writeFloatLE,4),Zt.prototype.writeFloatBE=At(Buffer.prototype.writeFloatBE,4),Zt.prototype.writeDoubleLE=At(Buffer.prototype.writeDoubleLE,8),Zt.prototype.writeDoubleBE=At(Buffer.prototype.writeDoubleBE,8),Zt.prototype.writeBuffer=function(t){this.ensureSize(t.length),t.copy(this.buffer,this.position,0,t.length),this.position+=t.length},Zt.prototype.writeVarInt=function(t){for(var e=1;0!=(4294967168&t);)this.writeUInt8(127&t|128),t>>>=7,e++;return this.writeUInt8(127&t),e},Zt.prototype.ensureSize=function(t){if(this.buffer.length<this.position+t){if(!this.allowResize)throw new RangeError("index out of range");var e=new Buffer.alloc(this.position+t);this.buffer.copy(e,0,0,this.buffer.length),this.buffer=e}};var zt,Ut,jt,Jt,Ht,Vt,Yt,Kt,qt,Xt,$t,Qt,te,ee,re={encode:function(t){return t<<1^t>>31},decode:function(t){return t>>1^-(1&t)}};function ne(){if(Ut)return zt;Ut=1,zt=a;var e=t,r=we(),n=Wt,o=Ct,i=re;function a(t,e,n,o,i){r.call(this),this.x=t,this.y=e,this.z=n,this.m=o,this.srid=i,this.hasZ=void 0!==this.z,this.hasM=void 0!==this.m}return e.inherits(a,r),a.Z=function(t,e,r,n){var o=new a(t,e,r,void 0,n);return o.hasZ=!0,o},a.M=function(t,e,r,n){var o=new a(t,e,void 0,r,n);return o.hasM=!0,o},a.ZM=function(t,e,r,n,o){var i=new a(t,e,r,n,o);return i.hasZ=!0,i.hasM=!0,i},a._parseWkt=function(t,e){var r=new a;if(r.srid=e.srid,r.hasZ=e.hasZ,r.hasM=e.hasM,t.isMatch(["EMPTY"]))return r;t.expectGroupStart();var n=t.matchCoordinate(e);return r.x=n.x,r.y=n.y,r.z=n.z,r.m=n.m,t.expectGroupEnd(),r},a._parseWkb=function(t,e){var r=a._readWkbPoint(t,e);return r.srid=e.srid,r},a._readWkbPoint=function(t,e){return new a(t.readDouble(),t.readDouble(),e.hasZ?t.readDouble():void 0,e.hasM?t.readDouble():void 0)},a._parseTwkb=function(t,e){var r=new a;return r.hasZ=e.hasZ,r.hasM=e.hasM,e.isEmpty||(r.x=i.decode(t.readVarInt())/e.precisionFactor,r.y=i.decode(t.readVarInt())/e.precisionFactor,r.z=e.hasZ?i.decode(t.readVarInt())/e.zPrecisionFactor:void 0,r.m=e.hasM?i.decode(t.readVarInt())/e.mPrecisionFactor:void 0),r},a._readTwkbPoint=function(t,e,r){return r.x+=i.decode(t.readVarInt())/e.precisionFactor,r.y+=i.decode(t.readVarInt())/e.precisionFactor,e.hasZ&&(r.z+=i.decode(t.readVarInt())/e.zPrecisionFactor),e.hasM&&(r.m+=i.decode(t.readVarInt())/e.mPrecisionFactor),new a(r.x,r.y,r.z,r.m)},a._parseGeoJSON=function(t){return a._readGeoJSONPoint(t.coordinates)},a._readGeoJSONPoint=function(t){return 0===t.length?new a:t.length>2?new a(t[0],t[1],t[2]):new a(t[0],t[1])},a.prototype.toWkt=function(){return void 0===this.x&&void 0===this.y&&void 0===this.z&&void 0===this.m?this._getWktType(n.wkt.Point,!0):this._getWktType(n.wkt.Point,!1)+"("+this._getWktCoordinate(this)+")"},a.prototype.toWkb=function(t){var e=new o(this._getWkbSize());return e.writeInt8(1),this._writeWkbType(e,n.wkb.Point,t),void 0===this.x&&void 0===this.y?(e.writeDoubleLE(NaN),e.writeDoubleLE(NaN),this.hasZ&&e.writeDoubleLE(NaN),this.hasM&&e.writeDoubleLE(NaN)):this._writeWkbPoint(e),e.buffer},a.prototype._writeWkbPoint=function(t){t.writeDoubleLE(this.x),t.writeDoubleLE(this.y),this.hasZ&&t.writeDoubleLE(this.z),this.hasM&&t.writeDoubleLE(this.m)},a.prototype.toTwkb=function(){var t=new o(0,!0),e=r.getTwkbPrecision(5,0,0),i=void 0===this.x&&void 0===this.y;return this._writeTwkbHeader(t,n.wkb.Point,e,i),i||this._writeTwkbPoint(t,e,new a(0,0,0,0)),t.buffer},a.prototype._writeTwkbPoint=function(t,e,r){var n=this.x*e.xyFactor,o=this.y*e.xyFactor,a=this.z*e.zFactor,s=this.m*e.mFactor;t.writeVarInt(i.encode(n-r.x)),t.writeVarInt(i.encode(o-r.y)),this.hasZ&&t.writeVarInt(i.encode(a-r.z)),this.hasM&&t.writeVarInt(i.encode(s-r.m)),r.x=n,r.y=o,r.z=a,r.m=s},a.prototype._getWkbSize=function(){var t=21;return this.hasZ&&(t+=8),this.hasM&&(t+=8),t},a.prototype.toGeoJSON=function(t){var e=r.prototype.toGeoJSON.call(this,t);return e.type=n.geoJSON.Point,void 0===this.x&&void 0===this.y?e.coordinates=[]:void 0!==this.z?e.coordinates=[this.x,this.y,this.z]:e.coordinates=[this.x,this.y],e},zt}function oe(){if(Jt)return jt;Jt=1,jt=a;var e=t,r=we(),n=Wt,o=ne(),i=Ct;function a(t,e){r.call(this),this.points=t||[],this.srid=e,this.points.length>0&&(this.hasZ=this.points[0].hasZ,this.hasM=this.points[0].hasM)}return e.inherits(a,r),a.Z=function(t,e){var r=new a(t,e);return r.hasZ=!0,r},a.M=function(t,e){var r=new a(t,e);return r.hasM=!0,r},a.ZM=function(t,e){var r=new a(t,e);return r.hasZ=!0,r.hasM=!0,r},a._parseWkt=function(t,e){var r=new a;return r.srid=e.srid,r.hasZ=e.hasZ,r.hasM=e.hasM,t.isMatch(["EMPTY"])||(t.expectGroupStart(),r.points.push.apply(r.points,t.matchCoordinates(e)),t.expectGroupEnd()),r},a._parseWkb=function(t,e){var r=new a;r.srid=e.srid,r.hasZ=e.hasZ,r.hasM=e.hasM;for(var n=t.readUInt32(),i=0;i<n;i++)r.points.push(o._readWkbPoint(t,e));return r},a._parseTwkb=function(t,e){var r=new a;if(r.hasZ=e.hasZ,r.hasM=e.hasM,e.isEmpty)return r;for(var n=new o(0,0,e.hasZ?0:void 0,e.hasM?0:void 0),i=t.readVarInt(),s=0;s<i;s++)r.points.push(o._readTwkbPoint(t,e,n));return r},a._parseGeoJSON=function(t){var e=new a;t.coordinates.length>0&&(e.hasZ=t.coordinates[0].length>2);for(var r=0;r<t.coordinates.length;r++)e.points.push(o._readGeoJSONPoint(t.coordinates[r]));return e},a.prototype.toWkt=function(){return 0===this.points.length?this._getWktType(n.wkt.LineString,!0):this._getWktType(n.wkt.LineString,!1)+this._toInnerWkt()},a.prototype._toInnerWkt=function(){for(var t="(",e=0;e<this.points.length;e++)t+=this._getWktCoordinate(this.points[e])+",";return t=t.slice(0,-1),t+=")"},a.prototype.toWkb=function(t){var e=new i(this._getWkbSize());e.writeInt8(1),this._writeWkbType(e,n.wkb.LineString,t),e.writeUInt32LE(this.points.length);for(var r=0;r<this.points.length;r++)this.points[r]._writeWkbPoint(e);return e.buffer},a.prototype.toTwkb=function(){var t=new i(0,!0),e=r.getTwkbPrecision(5,0,0),a=0===this.points.length;if(this._writeTwkbHeader(t,n.wkb.LineString,e,a),this.points.length>0){t.writeVarInt(this.points.length);for(var s=new o(0,0,0,0),u=0;u<this.points.length;u++)this.points[u]._writeTwkbPoint(t,e,s)}return t.buffer},a.prototype._getWkbSize=function(){var t=16;return this.hasZ&&(t+=8),this.hasM&&(t+=8),9+this.points.length*t},a.prototype.toGeoJSON=function(t){var e=r.prototype.toGeoJSON.call(this,t);e.type=n.geoJSON.LineString,e.coordinates=[];for(var o=0;o<this.points.length;o++)this.hasZ?e.coordinates.push([this.points[o].x,this.points[o].y,this.points[o].z]):e.coordinates.push([this.points[o].x,this.points[o].y]);return e},jt}function ie(){if(Vt)return Ht;Vt=1,Ht=a;var e=t,r=we(),n=Wt,o=ne(),i=Ct;function a(t,e,n){r.call(this),this.exteriorRing=t||[],this.interiorRings=e||[],this.srid=n,this.exteriorRing.length>0&&(this.hasZ=this.exteriorRing[0].hasZ,this.hasM=this.exteriorRing[0].hasM)}return e.inherits(a,r),a.Z=function(t,e,r){var n=new a(t,e,r);return n.hasZ=!0,n},a.M=function(t,e,r){var n=new a(t,e,r);return n.hasM=!0,n},a.ZM=function(t,e,r){var n=new a(t,e,r);return n.hasZ=!0,n.hasM=!0,n},a._parseWkt=function(t,e){var r=new a;if(r.srid=e.srid,r.hasZ=e.hasZ,r.hasM=e.hasM,t.isMatch(["EMPTY"]))return r;for(t.expectGroupStart(),t.expectGroupStart(),r.exteriorRing.push.apply(r.exteriorRing,t.matchCoordinates(e)),t.expectGroupEnd();t.isMatch([","]);)t.expectGroupStart(),r.interiorRings.push(t.matchCoordinates(e)),t.expectGroupEnd();return t.expectGroupEnd(),r},a._parseWkb=function(t,e){var r=new a;r.srid=e.srid,r.hasZ=e.hasZ,r.hasM=e.hasM;var n=t.readUInt32();if(n>0){for(var i=t.readUInt32(),s=0;s<i;s++)r.exteriorRing.push(o._readWkbPoint(t,e));for(s=1;s<n;s++){for(var u=[],l=t.readUInt32(),c=0;c<l;c++)u.push(o._readWkbPoint(t,e));r.interiorRings.push(u)}}return r},a._parseTwkb=function(t,e){var r=new a;if(r.hasZ=e.hasZ,r.hasM=e.hasM,e.isEmpty)return r;for(var n=new o(0,0,e.hasZ?0:void 0,e.hasM?0:void 0),i=t.readVarInt(),s=t.readVarInt(),u=0;u<s;u++)r.exteriorRing.push(o._readTwkbPoint(t,e,n));for(u=1;u<i;u++){for(var l=[],c=t.readVarInt(),f=0;f<c;f++)l.push(o._readTwkbPoint(t,e,n));r.interiorRings.push(l)}return r},a._parseGeoJSON=function(t){var e=new a;t.coordinates.length>0&&t.coordinates[0].length>0&&(e.hasZ=t.coordinates[0][0].length>2);for(var r=0;r<t.coordinates.length;r++){r>0&&e.interiorRings.push([]);for(var n=0;n<t.coordinates[r].length;n++)0===r?e.exteriorRing.push(o._readGeoJSONPoint(t.coordinates[r][n])):e.interiorRings[r-1].push(o._readGeoJSONPoint(t.coordinates[r][n]))}return e},a.prototype.toWkt=function(){return 0===this.exteriorRing.length?this._getWktType(n.wkt.Polygon,!0):this._getWktType(n.wkt.Polygon,!1)+this._toInnerWkt()},a.prototype._toInnerWkt=function(){for(var t="((",e=0;e<this.exteriorRing.length;e++)t+=this._getWktCoordinate(this.exteriorRing[e])+",";for(t=t.slice(0,-1),t+=")",e=0;e<this.interiorRings.length;e++){t+=",(";for(var r=0;r<this.interiorRings[e].length;r++)t+=this._getWktCoordinate(this.interiorRings[e][r])+",";t=t.slice(0,-1),t+=")"}return t+=")"},a.prototype.toWkb=function(t){var e=new i(this._getWkbSize());e.writeInt8(1),this._writeWkbType(e,n.wkb.Polygon,t),this.exteriorRing.length>0?(e.writeUInt32LE(1+this.interiorRings.length),e.writeUInt32LE(this.exteriorRing.length)):e.writeUInt32LE(0);for(var r=0;r<this.exteriorRing.length;r++)this.exteriorRing[r]._writeWkbPoint(e);for(r=0;r<this.interiorRings.length;r++){e.writeUInt32LE(this.interiorRings[r].length);for(var o=0;o<this.interiorRings[r].length;o++)this.interiorRings[r][o]._writeWkbPoint(e)}return e.buffer},a.prototype.toTwkb=function(){var t=new i(0,!0),e=r.getTwkbPrecision(5,0,0),a=0===this.exteriorRing.length;if(this._writeTwkbHeader(t,n.wkb.Polygon,e,a),this.exteriorRing.length>0){t.writeVarInt(1+this.interiorRings.length),t.writeVarInt(this.exteriorRing.length);for(var s=new o(0,0,0,0),u=0;u<this.exteriorRing.length;u++)this.exteriorRing[u]._writeTwkbPoint(t,e,s);for(u=0;u<this.interiorRings.length;u++){t.writeVarInt(this.interiorRings[u].length);for(var l=0;l<this.interiorRings[u].length;l++)this.interiorRings[u][l]._writeTwkbPoint(t,e,s)}}return t.buffer},a.prototype._getWkbSize=function(){var t=16;this.hasZ&&(t+=8),this.hasM&&(t+=8);var e=9;this.exteriorRing.length>0&&(e+=4+this.exteriorRing.length*t);for(var r=0;r<this.interiorRings.length;r++)e+=4+this.interiorRings[r].length*t;return e},a.prototype.toGeoJSON=function(t){var e=r.prototype.toGeoJSON.call(this,t);if(e.type=n.geoJSON.Polygon,e.coordinates=[],this.exteriorRing.length>0){for(var o=[],i=0;i<this.exteriorRing.length;i++)this.hasZ?o.push([this.exteriorRing[i].x,this.exteriorRing[i].y,this.exteriorRing[i].z]):o.push([this.exteriorRing[i].x,this.exteriorRing[i].y]);e.coordinates.push(o)}for(var a=0;a<this.interiorRings.length;a++){for(var s=[],u=0;u<this.interiorRings[a].length;u++)this.hasZ?s.push([this.interiorRings[a][u].x,this.interiorRings[a][u].y,this.interiorRings[a][u].z]):s.push([this.interiorRings[a][u].x,this.interiorRings[a][u].y]);e.coordinates.push(s)}return e},Ht}function ae(){if(Kt)return Yt;Kt=1,Yt=a;var e=t,r=Wt,n=we(),o=ne(),i=Ct;function a(t,e){n.call(this),this.points=t||[],this.srid=e,this.points.length>0&&(this.hasZ=this.points[0].hasZ,this.hasM=this.points[0].hasM)}return e.inherits(a,n),a.Z=function(t,e){var r=new a(t,e);return r.hasZ=!0,r},a.M=function(t,e){var r=new a(t,e);return r.hasM=!0,r},a.ZM=function(t,e){var r=new a(t,e);return r.hasZ=!0,r.hasM=!0,r},a._parseWkt=function(t,e){var r=new a;return r.srid=e.srid,r.hasZ=e.hasZ,r.hasM=e.hasM,t.isMatch(["EMPTY"])||(t.expectGroupStart(),r.points.push.apply(r.points,t.matchCoordinates(e)),t.expectGroupEnd()),r},a._parseWkb=function(t,e){var r=new a;r.srid=e.srid,r.hasZ=e.hasZ,r.hasM=e.hasM;for(var o=t.readUInt32(),i=0;i<o;i++)r.points.push(n.parse(t,e));return r},a._parseTwkb=function(t,e){var r=new a;if(r.hasZ=e.hasZ,r.hasM=e.hasM,e.isEmpty)return r;for(var n=new o(0,0,e.hasZ?0:void 0,e.hasM?0:void 0),i=t.readVarInt(),s=0;s<i;s++)r.points.push(o._readTwkbPoint(t,e,n));return r},a._parseGeoJSON=function(t){var e=new a;t.coordinates.length>0&&(e.hasZ=t.coordinates[0].length>2);for(var r=0;r<t.coordinates.length;r++)e.points.push(o._parseGeoJSON({coordinates:t.coordinates[r]}));return e},a.prototype.toWkt=function(){if(0===this.points.length)return this._getWktType(r.wkt.MultiPoint,!0);for(var t=this._getWktType(r.wkt.MultiPoint,!1)+"(",e=0;e<this.points.length;e++)t+=this._getWktCoordinate(this.points[e])+",";return t=t.slice(0,-1),t+=")"},a.prototype.toWkb=function(){var t=new i(this._getWkbSize());t.writeInt8(1),this._writeWkbType(t,r.wkb.MultiPoint),t.writeUInt32LE(this.points.length);for(var e=0;e<this.points.length;e++)t.writeBuffer(this.points[e].toWkb({srid:this.srid}));return t.buffer},a.prototype.toTwkb=function(){var t=new i(0,!0),e=n.getTwkbPrecision(5,0,0),a=0===this.points.length;if(this._writeTwkbHeader(t,r.wkb.MultiPoint,e,a),this.points.length>0){t.writeVarInt(this.points.length);for(var s=new o(0,0,0,0),u=0;u<this.points.length;u++)this.points[u]._writeTwkbPoint(t,e,s)}return t.buffer},a.prototype._getWkbSize=function(){var t=16;return this.hasZ&&(t+=8),this.hasM&&(t+=8),t+=5,9+this.points.length*t},a.prototype.toGeoJSON=function(t){var e=n.prototype.toGeoJSON.call(this,t);e.type=r.geoJSON.MultiPoint,e.coordinates=[];for(var o=0;o<this.points.length;o++)e.coordinates.push(this.points[o].toGeoJSON().coordinates);return e},Yt}function se(){if(Xt)return qt;Xt=1,qt=s;var e=t,r=Wt,n=we(),o=ne(),i=oe(),a=Ct;function s(t,e){n.call(this),this.lineStrings=t||[],this.srid=e,this.lineStrings.length>0&&(this.hasZ=this.lineStrings[0].hasZ,this.hasM=this.lineStrings[0].hasM)}return e.inherits(s,n),s.Z=function(t,e){var r=new s(t,e);return r.hasZ=!0,r},s.M=function(t,e){var r=new s(t,e);return r.hasM=!0,r},s.ZM=function(t,e){var r=new s(t,e);return r.hasZ=!0,r.hasM=!0,r},s._parseWkt=function(t,e){var r=new s;if(r.srid=e.srid,r.hasZ=e.hasZ,r.hasM=e.hasM,t.isMatch(["EMPTY"]))return r;t.expectGroupStart();do{t.expectGroupStart(),r.lineStrings.push(new i(t.matchCoordinates(e))),t.expectGroupEnd()}while(t.isMatch([","]));return t.expectGroupEnd(),r},s._parseWkb=function(t,e){var r=new s;r.srid=e.srid,r.hasZ=e.hasZ,r.hasM=e.hasM;for(var o=t.readUInt32(),i=0;i<o;i++)r.lineStrings.push(n.parse(t,e));return r},s._parseTwkb=function(t,e){var r=new s;if(r.hasZ=e.hasZ,r.hasM=e.hasM,e.isEmpty)return r;for(var n=new o(0,0,e.hasZ?0:void 0,e.hasM?0:void 0),a=t.readVarInt(),u=0;u<a;u++){var l=new i;l.hasZ=e.hasZ,l.hasM=e.hasM;for(var c=t.readVarInt(),f=0;f<c;f++)l.points.push(o._readTwkbPoint(t,e,n));r.lineStrings.push(l)}return r},s._parseGeoJSON=function(t){var e=new s;t.coordinates.length>0&&t.coordinates[0].length>0&&(e.hasZ=t.coordinates[0][0].length>2);for(var r=0;r<t.coordinates.length;r++)e.lineStrings.push(i._parseGeoJSON({coordinates:t.coordinates[r]}));return e},s.prototype.toWkt=function(){if(0===this.lineStrings.length)return this._getWktType(r.wkt.MultiLineString,!0);for(var t=this._getWktType(r.wkt.MultiLineString,!1)+"(",e=0;e<this.lineStrings.length;e++)t+=this.lineStrings[e]._toInnerWkt()+",";return t=t.slice(0,-1),t+=")"},s.prototype.toWkb=function(){var t=new a(this._getWkbSize());t.writeInt8(1),this._writeWkbType(t,r.wkb.MultiLineString),t.writeUInt32LE(this.lineStrings.length);for(var e=0;e<this.lineStrings.length;e++)t.writeBuffer(this.lineStrings[e].toWkb({srid:this.srid}));return t.buffer},s.prototype.toTwkb=function(){var t=new a(0,!0),e=n.getTwkbPrecision(5,0,0),i=0===this.lineStrings.length;if(this._writeTwkbHeader(t,r.wkb.MultiLineString,e,i),this.lineStrings.length>0){t.writeVarInt(this.lineStrings.length);for(var s=new o(0,0,0,0),u=0;u<this.lineStrings.length;u++){t.writeVarInt(this.lineStrings[u].points.length);for(var l=0;l<this.lineStrings[u].points.length;l++)this.lineStrings[u].points[l]._writeTwkbPoint(t,e,s)}}return t.buffer},s.prototype._getWkbSize=function(){for(var t=9,e=0;e<this.lineStrings.length;e++)t+=this.lineStrings[e]._getWkbSize();return t},s.prototype.toGeoJSON=function(t){var e=n.prototype.toGeoJSON.call(this,t);e.type=r.geoJSON.MultiLineString,e.coordinates=[];for(var o=0;o<this.lineStrings.length;o++)e.coordinates.push(this.lineStrings[o].toGeoJSON().coordinates);return e},qt}function ue(){if(Qt)return $t;Qt=1,$t=s;var e=t,r=Wt,n=we(),o=ne(),i=ie(),a=Ct;function s(t,e){n.call(this),this.polygons=t||[],this.srid=e,this.polygons.length>0&&(this.hasZ=this.polygons[0].hasZ,this.hasM=this.polygons[0].hasM)}return e.inherits(s,n),s.Z=function(t,e){var r=new s(t,e);return r.hasZ=!0,r},s.M=function(t,e){var r=new s(t,e);return r.hasM=!0,r},s.ZM=function(t,e){var r=new s(t,e);return r.hasZ=!0,r.hasM=!0,r},s._parseWkt=function(t,e){var r=new s;if(r.srid=e.srid,r.hasZ=e.hasZ,r.hasM=e.hasM,t.isMatch(["EMPTY"]))return r;t.expectGroupStart();do{t.expectGroupStart();var n=[],o=[];for(t.expectGroupStart(),n.push.apply(n,t.matchCoordinates(e)),t.expectGroupEnd();t.isMatch([","]);)t.expectGroupStart(),o.push(t.matchCoordinates(e)),t.expectGroupEnd();r.polygons.push(new i(n,o)),t.expectGroupEnd()}while(t.isMatch([","]));return t.expectGroupEnd(),r},s._parseWkb=function(t,e){var r=new s;r.srid=e.srid,r.hasZ=e.hasZ,r.hasM=e.hasM;for(var o=t.readUInt32(),i=0;i<o;i++)r.polygons.push(n.parse(t,e));return r},s._parseTwkb=function(t,e){var r=new s;if(r.hasZ=e.hasZ,r.hasM=e.hasM,e.isEmpty)return r;for(var n=new o(0,0,e.hasZ?0:void 0,e.hasM?0:void 0),a=t.readVarInt(),u=0;u<a;u++){var l=new i;l.hasZ=e.hasZ,l.hasM=e.hasM;for(var c=t.readVarInt(),f=t.readVarInt(),h=0;h<f;h++)l.exteriorRing.push(o._readTwkbPoint(t,e,n));for(h=1;h<c;h++){for(var p=[],d=t.readVarInt(),m=0;m<d;m++)p.push(o._readTwkbPoint(t,e,n));l.interiorRings.push(p)}r.polygons.push(l)}return r},s._parseGeoJSON=function(t){var e=new s;t.coordinates.length>0&&t.coordinates[0].length>0&&t.coordinates[0][0].length>0&&(e.hasZ=t.coordinates[0][0][0].length>2);for(var r=0;r<t.coordinates.length;r++)e.polygons.push(i._parseGeoJSON({coordinates:t.coordinates[r]}));return e},s.prototype.toWkt=function(){if(0===this.polygons.length)return this._getWktType(r.wkt.MultiPolygon,!0);for(var t=this._getWktType(r.wkt.MultiPolygon,!1)+"(",e=0;e<this.polygons.length;e++)t+=this.polygons[e]._toInnerWkt()+",";return t=t.slice(0,-1),t+=")"},s.prototype.toWkb=function(){var t=new a(this._getWkbSize());t.writeInt8(1),this._writeWkbType(t,r.wkb.MultiPolygon),t.writeUInt32LE(this.polygons.length);for(var e=0;e<this.polygons.length;e++)t.writeBuffer(this.polygons[e].toWkb({srid:this.srid}));return t.buffer},s.prototype.toTwkb=function(){var t=new a(0,!0),e=n.getTwkbPrecision(5,0,0),i=0===this.polygons.length;if(this._writeTwkbHeader(t,r.wkb.MultiPolygon,e,i),this.polygons.length>0){t.writeVarInt(this.polygons.length);for(var s=new o(0,0,0,0),u=0;u<this.polygons.length;u++){t.writeVarInt(1+this.polygons[u].interiorRings.length),t.writeVarInt(this.polygons[u].exteriorRing.length);for(var l=0;l<this.polygons[u].exteriorRing.length;l++)this.polygons[u].exteriorRing[l]._writeTwkbPoint(t,e,s);for(l=0;l<this.polygons[u].interiorRings.length;l++){t.writeVarInt(this.polygons[u].interiorRings[l].length);for(var c=0;c<this.polygons[u].interiorRings[l].length;c++)this.polygons[u].interiorRings[l][c]._writeTwkbPoint(t,e,s)}}}return t.buffer},s.prototype._getWkbSize=function(){for(var t=9,e=0;e<this.polygons.length;e++)t+=this.polygons[e]._getWkbSize();return t},s.prototype.toGeoJSON=function(t){var e=n.prototype.toGeoJSON.call(this,t);e.type=r.geoJSON.MultiPolygon,e.coordinates=[];for(var o=0;o<this.polygons.length;o++)e.coordinates.push(this.polygons[o].toGeoJSON().coordinates);return e},$t}function le(){if(ee)return te;ee=1,te=i;var e=t,r=Wt,n=we(),o=Ct;function i(t,e){n.call(this),this.geometries=t||[],this.srid=e,this.geometries.length>0&&(this.hasZ=this.geometries[0].hasZ,this.hasM=this.geometries[0].hasM)}return e.inherits(i,n),i.Z=function(t,e){var r=new i(t,e);return r.hasZ=!0,r},i.M=function(t,e){var r=new i(t,e);return r.hasM=!0,r},i.ZM=function(t,e){var r=new i(t,e);return r.hasZ=!0,r.hasM=!0,r},i._parseWkt=function(t,e){var r=new i;if(r.srid=e.srid,r.hasZ=e.hasZ,r.hasM=e.hasM,t.isMatch(["EMPTY"]))return r;t.expectGroupStart();do{r.geometries.push(n.parse(t))}while(t.isMatch([","]));return t.expectGroupEnd(),r},i._parseWkb=function(t,e){var r=new i;r.srid=e.srid,r.hasZ=e.hasZ,r.hasM=e.hasM;for(var o=t.readUInt32(),a=0;a<o;a++)r.geometries.push(n.parse(t,e));return r},i._parseTwkb=function(t,e){var r=new i;if(r.hasZ=e.hasZ,r.hasM=e.hasM,e.isEmpty)return r;for(var o=t.readVarInt(),a=0;a<o;a++)r.geometries.push(n.parseTwkb(t));return r},i._parseGeoJSON=function(t){for(var e=new i,r=0;r<t.geometries.length;r++)e.geometries.push(n._parseGeoJSON(t.geometries[r],!0));return e.geometries.length>0&&(e.hasZ=e.geometries[0].hasZ),e},i.prototype.toWkt=function(){if(0===this.geometries.length)return this._getWktType(r.wkt.GeometryCollection,!0);for(var t=this._getWktType(r.wkt.GeometryCollection,!1)+"(",e=0;e<this.geometries.length;e++)t+=this.geometries[e].toWkt()+",";return t=t.slice(0,-1),t+=")"},i.prototype.toWkb=function(){var t=new o(this._getWkbSize());t.writeInt8(1),this._writeWkbType(t,r.wkb.GeometryCollection),t.writeUInt32LE(this.geometries.length);for(var e=0;e<this.geometries.length;e++)t.writeBuffer(this.geometries[e].toWkb({srid:this.srid}));return t.buffer},i.prototype.toTwkb=function(){var t=new o(0,!0),e=n.getTwkbPrecision(5,0,0),i=0===this.geometries.length;if(this._writeTwkbHeader(t,r.wkb.GeometryCollection,e,i),this.geometries.length>0){t.writeVarInt(this.geometries.length);for(var a=0;a<this.geometries.length;a++)t.writeBuffer(this.geometries[a].toTwkb())}return t.buffer},i.prototype._getWkbSize=function(){for(var t=9,e=0;e<this.geometries.length;e++)t+=this.geometries[e]._getWkbSize();return t},i.prototype.toGeoJSON=function(t){var e=n.prototype.toGeoJSON.call(this,t);e.type=r.geoJSON.GeometryCollection,e.geometries=[];for(var o=0;o<this.geometries.length;o++)e.geometries.push(this.geometries[o].toGeoJSON());return e},te}var ce,fe,he,pe,de=me;function me(t,e){this.buffer=t,this.position=0,this.isBigEndian=e||!1}function ge(t,e,r){return function(){var n;return n=this.isBigEndian?e.call(this.buffer,this.position):t.call(this.buffer,this.position),this.position+=r,n}}function we(){if(pe)return he;pe=1,he=h;var t=Wt,e=ne(),r=oe(),n=ie(),o=ae(),i=se(),a=ue(),s=le(),u=de,l=Ct,c=function(){if(fe)return ce;fe=1,ce=r;var t=Wt,e=ne();function r(t){this.value=t,this.position=0}return r.prototype.match=function(t){this.skipWhitespaces();for(var e=0;e<t.length;e++)if(0===this.value.substring(this.position).indexOf(t[e]))return this.position+=t[e].length,t[e];return null},r.prototype.matchRegex=function(t){this.skipWhitespaces();for(var e=0;e<t.length;e++){var r=this.value.substring(this.position).match(t[e]);if(r)return this.position+=r[0].length,r}return null},r.prototype.isMatch=function(t){this.skipWhitespaces();for(var e=0;e<t.length;e++)if(0===this.value.substring(this.position).indexOf(t[e]))return this.position+=t[e].length,!0;return!1},r.prototype.matchType=function(){var e=this.match([t.wkt.Point,t.wkt.LineString,t.wkt.Polygon,t.wkt.MultiPoint,t.wkt.MultiLineString,t.wkt.MultiPolygon,t.wkt.GeometryCollection]);if(!e)throw new Error("Expected geometry type");return e},r.prototype.matchDimension=function(){switch(this.match(["ZM","Z","M"])){case"ZM":return{hasZ:!0,hasM:!0};case"Z":return{hasZ:!0,hasM:!1};case"M":return{hasZ:!1,hasM:!0};default:return{hasZ:!1,hasM:!1}}},r.prototype.expectGroupStart=function(){if(!this.isMatch(["("]))throw new Error("Expected group start")},r.prototype.expectGroupEnd=function(){if(!this.isMatch([")"]))throw new Error("Expected group end")},r.prototype.matchCoordinate=function(t){var r;if(!(r=t.hasZ&&t.hasM?this.matchRegex([/^(\S*)\s+(\S*)\s+(\S*)\s+([^\s,)]*)/]):t.hasZ||t.hasM?this.matchRegex([/^(\S*)\s+(\S*)\s+([^\s,)]*)/]):this.matchRegex([/^(\S*)\s+([^\s,)]*)/])))throw new Error("Expected coordinates");return t.hasZ&&t.hasM?new e(parseFloat(r[1]),parseFloat(r[2]),parseFloat(r[3]),parseFloat(r[4])):t.hasZ?new e(parseFloat(r[1]),parseFloat(r[2]),parseFloat(r[3])):t.hasM?new e(parseFloat(r[1]),parseFloat(r[2]),void 0,parseFloat(r[3])):new e(parseFloat(r[1]),parseFloat(r[2]))},r.prototype.matchCoordinates=function(t){var e=[];do{var r=this.isMatch(["("]);e.push(this.matchCoordinate(t)),r&&this.expectGroupEnd()}while(this.isMatch([","]));return e},r.prototype.skipWhitespaces=function(){for(;this.position<this.value.length&&" "===this.value[this.position];)this.position++},ce}(),f=re;function h(){this.srid=void 0,this.hasZ=!1,this.hasM=!1}return h.parse=function(t,e){if("string"===typeof t||t instanceof c)return h._parseWkt(t);if(Buffer.isBuffer(t)||t instanceof u)return h._parseWkb(t,e);throw new Error("first argument must be a string or Buffer")},h._parseWkt=function(u){var l,f,h=(l=u instanceof c?u:new c(u)).matchRegex([/^SRID=(\d+);/]);h&&(f=parseInt(h[1],10));var p=l.matchType(),d=l.matchDimension(),m={srid:f,hasZ:d.hasZ,hasM:d.hasM};switch(p){case t.wkt.Point:return e._parseWkt(l,m);case t.wkt.LineString:return r._parseWkt(l,m);case t.wkt.Polygon:return n._parseWkt(l,m);case t.wkt.MultiPoint:return o._parseWkt(l,m);case t.wkt.MultiLineString:return i._parseWkt(l,m);case t.wkt.MultiPolygon:return a._parseWkt(l,m);case t.wkt.GeometryCollection:return s._parseWkt(l,m)}},h._parseWkb=function(l,c){var f,h,p,d={};switch((f=l instanceof u?l:new u(l)).isBigEndian=!f.readInt8(),h=f.readUInt32(),d.hasSrid=536870912==(536870912&h),d.isEwkb=536870912&h||1073741824&h||2147483648&h,d.hasSrid&&(d.srid=f.readUInt32()),d.hasZ=!1,d.hasM=!1,d.isEwkb||c&&c.isEwkb?(2147483648&h&&(d.hasZ=!0),1073741824&h&&(d.hasM=!0),p=15&h):h>=1e3&&h<2e3?(d.hasZ=!0,p=h-1e3):h>=2e3&&h<3e3?(d.hasM=!0,p=h-2e3):h>=3e3&&h<4e3?(d.hasZ=!0,d.hasM=!0,p=h-3e3):p=h,p){case t.wkb.Point:return e._parseWkb(f,d);case t.wkb.LineString:return r._parseWkb(f,d);case t.wkb.Polygon:return n._parseWkb(f,d);case t.wkb.MultiPoint:return o._parseWkb(f,d);case t.wkb.MultiLineString:return i._parseWkb(f,d);case t.wkb.MultiPolygon:return a._parseWkb(f,d);case t.wkb.GeometryCollection:return s._parseWkb(f,d);default:throw new Error("GeometryType "+p+" not supported")}},h.parseTwkb=function(l){var c,h={},p=(c=l instanceof u?l:new u(l)).readUInt8(),d=c.readUInt8(),m=15&p;if(h.precision=f.decode(p>>4),h.precisionFactor=Math.pow(10,h.precision),h.hasBoundingBox=d>>0&1,h.hasSizeAttribute=d>>1&1,h.hasIdList=d>>2&1,h.hasExtendedPrecision=d>>3&1,h.isEmpty=d>>4&1,h.hasExtendedPrecision){var g=c.readUInt8();h.hasZ=1==(1&g),h.hasM=2==(2&g),h.zPrecision=f.decode((28&g)>>2),h.zPrecisionFactor=Math.pow(10,h.zPrecision),h.mPrecision=f.decode((224&g)>>5),h.mPrecisionFactor=Math.pow(10,h.mPrecision)}else h.hasZ=!1,h.hasM=!1;if(h.hasSizeAttribute&&c.readVarInt(),h.hasBoundingBox){var w=2;h.hasZ&&w++,h.hasM&&w++;for(var y=0;y<w;y++)c.readVarInt(),c.readVarInt()}switch(m){case t.wkb.Point:return e._parseTwkb(c,h);case t.wkb.LineString:return r._parseTwkb(c,h);case t.wkb.Polygon:return n._parseTwkb(c,h);case t.wkb.MultiPoint:return o._parseTwkb(c,h);case t.wkb.MultiLineString:return i._parseTwkb(c,h);case t.wkb.MultiPolygon:return a._parseTwkb(c,h);case t.wkb.GeometryCollection:return s._parseTwkb(c,h);default:throw new Error("GeometryType "+m+" not supported")}},h.parseGeoJSON=function(t){return h._parseGeoJSON(t)},h._parseGeoJSON=function(u,l){var c;switch(u.type){case t.geoJSON.Point:c=e._parseGeoJSON(u);break;case t.geoJSON.LineString:c=r._parseGeoJSON(u);break;case t.geoJSON.Polygon:c=n._parseGeoJSON(u);break;case t.geoJSON.MultiPoint:c=o._parseGeoJSON(u);break;case t.geoJSON.MultiLineString:c=i._parseGeoJSON(u);break;case t.geoJSON.MultiPolygon:c=a._parseGeoJSON(u);break;case t.geoJSON.GeometryCollection:c=s._parseGeoJSON(u);break;default:throw new Error("GeometryType "+u.type+" not supported")}if(u.crs&&u.crs.type&&"name"===u.crs.type&&u.crs.properties&&u.crs.properties.name){var f=u.crs.properties.name;if(0===f.indexOf("EPSG:"))c.srid=parseInt(f.substring(5));else{if(0!==f.indexOf("urn:ogc:def:crs:EPSG::"))throw new Error("Unsupported crs: "+f);c.srid=parseInt(f.substring(22))}}else l||(c.srid=4326);return c},h.prototype.toEwkt=function(){return"SRID="+this.srid+";"+this.toWkt()},h.prototype.toEwkb=function(){var t=new l(this._getWkbSize()+4),e=this.toWkb();return t.writeInt8(1),t.writeUInt32LE((536870912|e.slice(1,5).readUInt32LE(0))>>>0,!0),t.writeUInt32LE(this.srid),t.writeBuffer(e.slice(5)),t.buffer},h.prototype._getWktType=function(t,e){var r=t;return this.hasZ&&this.hasM?r+=" ZM ":this.hasZ?r+=" Z ":this.hasM&&(r+=" M "),!e||this.hasZ||this.hasM||(r+=" "),e&&(r+="EMPTY"),r},h.prototype._getWktCoordinate=function(t){var e=t.x+" "+t.y;return this.hasZ&&(e+=" "+t.z),this.hasM&&(e+=" "+t.m),e},h.prototype._writeWkbType=function(t,e,r){var n=0;void 0!==this.srid||r&&void 0!==r.srid?(this.hasZ&&(n|=2147483648),this.hasM&&(n|=1073741824)):this.hasZ&&this.hasM?n+=3e3:this.hasZ?n+=1e3:this.hasM&&(n+=2e3),t.writeUInt32LE(n+e>>>0,!0)},h.getTwkbPrecision=function(t,e,r){return{xy:t,z:e,m:r,xyFactor:Math.pow(10,t),zFactor:Math.pow(10,e),mFactor:Math.pow(10,r)}},h.prototype._writeTwkbHeader=function(t,e,r,n){var o=(f.encode(r.xy)<<4)+e,i=(this.hasZ||this.hasM)<<3;if(i+=n<<4,t.writeUInt8(o),t.writeUInt8(i),this.hasZ||this.hasM){var a=0;this.hasZ&&(a|=1),this.hasM&&(a|=2),t.writeUInt8(a)}},h.prototype.toGeoJSON=function(t){var e={};return this.srid&&t&&(t.shortCrs?e.crs={type:"name",properties:{name:"EPSG:"+this.srid}}:t.longCrs&&(e.crs={type:"name",properties:{name:"urn:ogc:def:crs:EPSG::"+this.srid}})),e},he}me.prototype.readUInt8=ge(Buffer.prototype.readUInt8,Buffer.prototype.readUInt8,1),me.prototype.readUInt16=ge(Buffer.prototype.readUInt16LE,Buffer.prototype.readUInt16BE,2),me.prototype.readUInt32=ge(Buffer.prototype.readUInt32LE,Buffer.prototype.readUInt32BE,4),me.prototype.readInt8=ge(Buffer.prototype.readInt8,Buffer.prototype.readInt8,1),me.prototype.readInt16=ge(Buffer.prototype.readInt16LE,Buffer.prototype.readInt16BE,2),me.prototype.readInt32=ge(Buffer.prototype.readInt32LE,Buffer.prototype.readInt32BE,4),me.prototype.readFloat=ge(Buffer.prototype.readFloatLE,Buffer.prototype.readFloatBE,4),me.prototype.readDouble=ge(Buffer.prototype.readDoubleLE,Buffer.prototype.readDoubleBE,8),me.prototype.readVarInt=function(){var t,e=0,r=0;do{e+=(127&(t=this.buffer[this.position+r]))<<7*r,r++}while(t>=128);return this.position+=r,e};var ye=we();function Ee(t,r,n,o,i,a,s,u){const l=t.properties||{},d="Feature"===t.type?t.geometry:t;if("GeometryCollection"===d.type){const e=[];return w(t,(function(t){const l=Ee(t,r,n,o,i,a,s,u);l&&e.push(l)})),p(e)}const m=function(t){const e=E(t).geometry.coordinates,r=[-e[0],-e[1]];return Bt().rotate(r).scale(c)}(d),g={type:d.type,coordinates:_e(d.coordinates,m)},y=i||a||s||u;let v;y&&(v=e.GEOSBufferParams_create(),i&&e.GEOSBufferParams_setEndCapStyle(v,i),a&&e.GEOSBufferParams_setJoinStyle(v,a),s&&e.GEOSBufferParams_setMitreLimit(v,s),o&&e.GEOSBufferParams_setQuadrantSegments(v,o),u&&e.GEOSBufferParams_setSingleSided(v,u));const _=function(t){const r=e.Module._malloc(t.length);e.Module.HEAPU8.set(t,r);const n=e.GEOSGeomFromWKB_buf(r,t.length);return e.GEOSFree(r),n}(ye.parseGeoJSON(g).toWkb()),S=function(t,e){void 0===e&&(e="kilometers");var r=f[e];if(!r)throw new Error(e+" units is invalid");return t*r}(function(t,e){void 0===e&&(e="kilometers");var r=f[e];if(!r)throw new Error(e+" units is invalid");return t/r}(r,n),"meters");let b;b=y?e.GEOSBufferWithParams(_,v,S):e.GEOSBuffer(_,S,o),v&&e.GEOSBufferParams_destroy(v);const k=function(t){const r=e.Module._malloc(4),n=e.GEOSGeomToWKB_buf(t,r),o=new Uint8Array(e.Module.HEAPU8.buffer,n,r);return e.GEOSFree(n),e.GEOSFree(r),e.GEOSGeom_destroy(t),Buffer.from(o)}(b),M=ye.parse(k).toGeoJSON();if(ve(M.coordinates))return;return h({type:M.type,coordinates:Se(M.coordinates,m)},l)}function ve(t){return Array.isArray(t[0])?ve(t[0]):isNaN(t[0])}function _e(t,e){return"object"!=typeof t[0]?e(t):t.map((function(t){return _e(t,e)}))}function Se(t,e){return"object"!=typeof t[0]?e.invert(t):t.map((function(t){return Se(t,e)}))}ne(),oe(),ie(),ae(),se(),ue(),le();var be,ke={buffer:function(t,e,r){const n=(r=r||{}).units||"kilometers",o=r.steps||8,i=r.endCapStyle||1,a=r.joinStyle||1,s=r.mitreLimit||5,u=r.singleSided||!1;if(!t)throw new Error("geojson is required");if("object"!=typeof r)throw new Error("options must be an object");if("number"!=typeof o)throw new Error("steps must be an number");if(void 0===e)throw new Error("radius is required");if(o<=0)throw new Error("steps must be greater than 0");const l=[];switch(t.type){case"GeometryCollection":return w(t,(function(t){const r=Ee(t,e,n,o,i,a,s,u);r&&l.push(r)})),p(l);case"FeatureCollection":return g(t,(function(t){const r=Ee(t,e,n,o,i,a,s,u);r&&g(r,(function(t){t&&l.push(t)}))})),p(l)}return Ee(t,e,n,o,i,a,s,u)},buffer_simple:function(t,r,n={}){const{quadrantSegments:o=8,endCapStyle:i,joinStyle:a,mitreLimit:s,singleSided:c}=n,f=i||a||s||c;let h;f&&(h=e.GEOSBufferParams_create(),i&&e.GEOSBufferParams_setEndCapStyle(h,i),a&&e.GEOSBufferParams_setJoinStyle(h,a),s&&e.GEOSBufferParams_setMitreLimit(h,s),o&&e.GEOSBufferParams_setQuadrantSegments(h,o),c&&e.GEOSBufferParams_setSingleSided(h,c));const p=function(t){const e=[];return"FeatureCollection"===t.type||"GeometryCollection"===t.type?t.features.forEach((t=>{e.push(u(t.geometry))})):e.push(u(t)),e}(t),d=p.map((t=>f?e.GEOSBufferWithParams(t,h,r):e.GEOSBuffer(t,r,o)));h&&e.GEOSBufferParams_destroy(h);return function(t,e){return t.forEach(((t,r)=>{e.features?e.features[r]=l(t,e.features[r]):e.geometries?e.geometries[r]=l(t,e.geometries[r]):e=l(t,e)})),e}(d,t)},geomToWKT:s,geomFromWKT:a},Me=(be=import.meta.url,async function(t={}){var e,r,n=t;n.ready=new Promise(((t,n)=>{e=t,r=n}));var o,i,a,s=Object.assign({},n),u="./this.program",l="object"==typeof window,c="function"==typeof importScripts,f="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,h="";if(f){const{createRequire:t}=await import("module");var p=t(import.meta.url),d=p("fs"),m=p("path");h=c?m.dirname(h)+"/":p("url").fileURLToPath(new URL("./",import.meta.url)),o=(t,e)=>(t=Z(t)?new URL(t):m.normalize(t),d.readFileSync(t,e?void 0:"utf8")),a=t=>{var e=o(t,!0);return e.buffer||(e=new Uint8Array(e)),e},i=(t,e,r,n=!0)=>{t=Z(t)?new URL(t):m.normalize(t),d.readFile(t,n?void 0:"utf8",((t,o)=>{t?r(t):e(n?o.buffer:o)}))},!n.thisProgram&&process.argv.length>1&&(u=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),n.inspect=()=>"[Emscripten Module object]"}else(l||c)&&(c?h=self.location.href:"undefined"!=typeof document&&document.currentScript&&(h=document.currentScript.src),be&&(h=be),h=0!==h.indexOf("blob:")?h.substr(0,h.replace(/[?#].*/,"").lastIndexOf("/")+1):"",o=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},c&&(a=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),i=(t,e,r)=>{var n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType="arraybuffer",n.onload=()=>{200==n.status||0==n.status&&n.response?e(n.response):r()},n.onerror=r,n.send(null)});var g,w,y=n.print||console.log.bind(console),E=n.printErr||console.error.bind(console);Object.assign(n,s),s=null,n.arguments&&n.arguments,n.thisProgram&&(u=n.thisProgram),n.quit&&n.quit,n.wasmBinary&&(g=n.wasmBinary),n.noExitRuntime,"object"!=typeof WebAssembly&&D("no native wasm support detected");var v,_,S,b,k,M=!1;function O(t,e){t||D(e)}function P(){var t=w.buffer;n.HEAP8=v=new Int8Array(t),n.HEAP16=new Int16Array(t),n.HEAP32=S=new Int32Array(t),n.HEAPU8=_=new Uint8Array(t),n.HEAPU16=new Uint16Array(t),n.HEAPU32=b=new Uint32Array(t),n.HEAPF32=new Float32Array(t),n.HEAPF64=new Float64Array(t)}var N=[],G=[],T=[],I=0,F=null;function R(t){I++,n.monitorRunDependencies&&n.monitorRunDependencies(I)}function L(t){if(I--,n.monitorRunDependencies&&n.monitorRunDependencies(I),0==I&&F){var e=F;F=null,e()}}function D(t){n.onAbort&&n.onAbort(t),E(t="Aborted("+t+")"),M=!0,t+=". Build with -sASSERTIONS for more info.";var e=new WebAssembly.RuntimeError(t);throw r(e),e}var x,B,W="data:application/octet-stream;base64,";function C(t){return t.startsWith(W)}function Z(t){return t.startsWith("file://")}function A(t){try{if(t==x&&g)return new Uint8Array(g);if(a)return a(t);throw"both async and sync fetching of the wasm failed"}catch(t){D(t)}}function z(t,e,r){return function(t){if(!g&&(l||c)){if("function"==typeof fetch&&!Z(t))return fetch(t,{credentials:"same-origin"}).then((e=>{if(!e.ok)throw"failed to load wasm binary file at '"+t+"'";return e.arrayBuffer()})).catch((()=>A(t)));if(i)return new Promise(((e,r)=>{i(t,(t=>e(new Uint8Array(t))),r)}))}return Promise.resolve().then((()=>A(t)))}(t).then((t=>WebAssembly.instantiate(t,e))).then((t=>t)).then(r,(t=>{E("failed to asynchronously prepare wasm: "+t),D(t)}))}n.locateFile?C(x="geos.wasm")||(B=x,x=n.locateFile?n.locateFile(B,h):h+B):x=new URL("geos.wasm",import.meta.url).href;var U=t=>{for(;t.length>0;)t.shift()(n)},j="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0,J=(t,e,r)=>{for(var n=e+r,o=e;t[o]&&!(o>=n);)++o;if(o-e>16&&t.buffer&&j)return j.decode(t.subarray(e,o));for(var i="";e<o;){var a=t[e++];if(128&a){var s=63&t[e++];if(192!=(224&a)){var u=63&t[e++];if((a=224==(240&a)?(15&a)<<12|s<<6|u:(7&a)<<18|s<<12|u<<6|63&t[e++])<65536)i+=String.fromCharCode(a);else{var l=a-65536;i+=String.fromCharCode(55296|l>>10,56320|1023&l)}}else i+=String.fromCharCode((31&a)<<6|s)}else i+=String.fromCharCode(a)}return i},H=(t,e)=>t?J(_,t,e):"",V=[],Y=0,K=0;function q(t){this.excPtr=t,this.ptr=t-24,this.set_type=function(t){b[this.ptr+4>>2]=t},this.get_type=function(){return b[this.ptr+4>>2]},this.set_destructor=function(t){b[this.ptr+8>>2]=t},this.get_destructor=function(){return b[this.ptr+8>>2]},this.set_caught=function(t){t=t?1:0,v[this.ptr+12>>0]=t},this.get_caught=function(){return 0!=v[this.ptr+12>>0]},this.set_rethrown=function(t){t=t?1:0,v[this.ptr+13>>0]=t},this.get_rethrown=function(){return 0!=v[this.ptr+13>>0]},this.init=function(t,e){this.set_adjusted_ptr(0),this.set_type(t),this.set_destructor(e)},this.set_adjusted_ptr=function(t){b[this.ptr+16>>2]=t},this.get_adjusted_ptr=function(){return b[this.ptr+16>>2]},this.get_exception_ptr=function(){if(zt(this.get_type()))return b[this.excPtr>>2];var t=this.get_adjusted_ptr();return 0!==t?t:this.excPtr}}function X(){var t=K;if(!t)return Dt(0),0;var e=new q(t);e.set_adjusted_ptr(t);var r=e.get_type();if(!r)return Dt(0),t;for(var n=0;n<arguments.length;n++){var o=arguments[n];if(0===o||o===r)break;var i=e.ptr+16;if(At(o,r,i))return Dt(o),t}return Dt(r),t}var $=X,Q=X,tt=X,et=t=>{var e=t-w.buffer.byteLength+65535>>>16;try{return w.grow(e),P(),1}catch(t){}},rt={},nt=()=>{if(!nt.strings){var t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:u||"./this.program"};for(var e in rt)void 0===rt[e]?delete t[e]:t[e]=rt[e];var r=[];for(var e in t)r.push(`${e}=${t[e]}`);nt.strings=r}return nt.strings},ot={isAbs:t=>"/"===t.charAt(0),splitPath:t=>/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(t).slice(1),normalizeArray:(t,e)=>{for(var r=0,n=t.length-1;n>=0;n--){var o=t[n];"."===o?t.splice(n,1):".."===o?(t.splice(n,1),r++):r&&(t.splice(n,1),r--)}if(e)for(;r;r--)t.unshift("..");return t},normalize:t=>{var e=ot.isAbs(t),r="/"===t.substr(-1);return(t=ot.normalizeArray(t.split("/").filter((t=>!!t)),!e).join("/"))||e||(t="."),t&&r&&(t+="/"),(e?"/":"")+t},dirname:t=>{var e=ot.splitPath(t),r=e[0],n=e[1];return r||n?(n&&(n=n.substr(0,n.length-1)),r+n):"."},basename:t=>{if("/"===t)return"/";var e=(t=(t=ot.normalize(t)).replace(/\/$/,"")).lastIndexOf("/");return-1===e?t:t.substr(e+1)},join:function(){var t=Array.prototype.slice.call(arguments);return ot.normalize(t.join("/"))},join2:(t,e)=>ot.normalize(t+"/"+e)},it=t=>(it=(()=>{if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues)return t=>crypto.getRandomValues(t);if(f)try{var t=p("crypto");if(t.randomFillSync)return e=>t.randomFillSync(e);var e=t.randomBytes;return t=>(t.set(e(t.byteLength)),t)}catch(t){}D("initRandomDevice")})())(t),at={resolve:function(){for(var t="",e=!1,r=arguments.length-1;r>=-1&&!e;r--){var n=r>=0?arguments[r]:yt.cwd();if("string"!=typeof n)throw new TypeError("Arguments to path.resolve must be strings");if(!n)return"";t=n+"/"+t,e=ot.isAbs(n)}return(e?"/":"")+(t=ot.normalizeArray(t.split("/").filter((t=>!!t)),!e).join("/"))||"."},relative:(t,e)=>{function r(t){for(var e=0;e<t.length&&""===t[e];e++);for(var r=t.length-1;r>=0&&""===t[r];r--);return e>r?[]:t.slice(e,r-e+1)}t=at.resolve(t).substr(1),e=at.resolve(e).substr(1);for(var n=r(t.split("/")),o=r(e.split("/")),i=Math.min(n.length,o.length),a=i,s=0;s<i;s++)if(n[s]!==o[s]){a=s;break}var u=[];for(s=a;s<n.length;s++)u.push("..");return(u=u.concat(o.slice(a))).join("/")}},st=t=>{for(var e=0,r=0;r<t.length;++r){var n=t.charCodeAt(r);n<=127?e++:n<=2047?e+=2:n>=55296&&n<=57343?(e+=4,++r):e+=3}return e},ut=(t,e,r,n)=>{if(!(n>0))return 0;for(var o=r,i=r+n-1,a=0;a<t.length;++a){var s=t.charCodeAt(a);if(s>=55296&&s<=57343&&(s=65536+((1023&s)<<10)|1023&t.charCodeAt(++a)),s<=127){if(r>=i)break;e[r++]=s}else if(s<=2047){if(r+1>=i)break;e[r++]=192|s>>6,e[r++]=128|63&s}else if(s<=65535){if(r+2>=i)break;e[r++]=224|s>>12,e[r++]=128|s>>6&63,e[r++]=128|63&s}else{if(r+3>=i)break;e[r++]=240|s>>18,e[r++]=128|s>>12&63,e[r++]=128|s>>6&63,e[r++]=128|63&s}}return e[r]=0,r-o};function lt(t,e,r){var n=r>0?r:st(t)+1,o=new Array(n),i=ut(t,o,0,o.length);return e&&(o.length=i),o}var ct={ttys:[],init:function(){},shutdown:function(){},register:function(t,e){ct.ttys[t]={input:[],output:[],ops:e},yt.registerDevice(t,ct.stream_ops)},stream_ops:{open:function(t){var e=ct.ttys[t.node.rdev];if(!e)throw new yt.ErrnoError(43);t.tty=e,t.seekable=!1},close:function(t){t.tty.ops.fsync(t.tty)},fsync:function(t){t.tty.ops.fsync(t.tty)},read:function(t,e,r,n,o){if(!t.tty||!t.tty.ops.get_char)throw new yt.ErrnoError(60);for(var i=0,a=0;a<n;a++){var s;try{s=t.tty.ops.get_char(t.tty)}catch(t){throw new yt.ErrnoError(29)}if(void 0===s&&0===i)throw new yt.ErrnoError(6);if(null==s)break;i++,e[r+a]=s}return i&&(t.node.timestamp=Date.now()),i},write:function(t,e,r,n,o){if(!t.tty||!t.tty.ops.put_char)throw new yt.ErrnoError(60);try{for(var i=0;i<n;i++)t.tty.ops.put_char(t.tty,e[r+i])}catch(t){throw new yt.ErrnoError(29)}return n&&(t.node.timestamp=Date.now()),i}},default_tty_ops:{get_char:function(t){if(!t.input.length){var e=null;if(f){var r=Buffer.alloc(256),n=0;try{n=d.readSync(process.stdin.fd,r,0,256,-1)}catch(t){if(!t.toString().includes("EOF"))throw t;n=0}e=n>0?r.slice(0,n).toString("utf-8"):null}else"undefined"!=typeof window&&"function"==typeof window.prompt?null!==(e=window.prompt("Input: "))&&(e+="\n"):"function"==typeof readline&&null!==(e=readline())&&(e+="\n");if(!e)return null;t.input=lt(e,!0)}return t.input.shift()},put_char:function(t,e){null===e||10===e?(y(J(t.output,0)),t.output=[]):0!=e&&t.output.push(e)},fsync:function(t){t.output&&t.output.length>0&&(y(J(t.output,0)),t.output=[])},ioctl_tcgets:function(t){return{c_iflag:25856,c_oflag:5,c_cflag:191,c_lflag:35387,c_cc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},ioctl_tcsets:function(t,e,r){return 0},ioctl_tiocgwinsz:function(t){return[24,80]}},default_tty1_ops:{put_char:function(t,e){null===e||10===e?(E(J(t.output,0)),t.output=[]):0!=e&&t.output.push(e)},fsync:function(t){t.output&&t.output.length>0&&(E(J(t.output,0)),t.output=[])}}},ft=t=>{D()},ht={ops_table:null,mount:function(t){return ht.createNode(null,"/",16895,0)},createNode:function(t,e,r,n){if(yt.isBlkdev(r)||yt.isFIFO(r))throw new yt.ErrnoError(63);ht.ops_table||(ht.ops_table={dir:{node:{getattr:ht.node_ops.getattr,setattr:ht.node_ops.setattr,lookup:ht.node_ops.lookup,mknod:ht.node_ops.mknod,rename:ht.node_ops.rename,unlink:ht.node_ops.unlink,rmdir:ht.node_ops.rmdir,readdir:ht.node_ops.readdir,symlink:ht.node_ops.symlink},stream:{llseek:ht.stream_ops.llseek}},file:{node:{getattr:ht.node_ops.getattr,setattr:ht.node_ops.setattr},stream:{llseek:ht.stream_ops.llseek,read:ht.stream_ops.read,write:ht.stream_ops.write,allocate:ht.stream_ops.allocate,mmap:ht.stream_ops.mmap,msync:ht.stream_ops.msync}},link:{node:{getattr:ht.node_ops.getattr,setattr:ht.node_ops.setattr,readlink:ht.node_ops.readlink},stream:{}},chrdev:{node:{getattr:ht.node_ops.getattr,setattr:ht.node_ops.setattr},stream:yt.chrdev_stream_ops}});var o=yt.createNode(t,e,r,n);return yt.isDir(o.mode)?(o.node_ops=ht.ops_table.dir.node,o.stream_ops=ht.ops_table.dir.stream,o.contents={}):yt.isFile(o.mode)?(o.node_ops=ht.ops_table.file.node,o.stream_ops=ht.ops_table.file.stream,o.usedBytes=0,o.contents=null):yt.isLink(o.mode)?(o.node_ops=ht.ops_table.link.node,o.stream_ops=ht.ops_table.link.stream):yt.isChrdev(o.mode)&&(o.node_ops=ht.ops_table.chrdev.node,o.stream_ops=ht.ops_table.chrdev.stream),o.timestamp=Date.now(),t&&(t.contents[e]=o,t.timestamp=o.timestamp),o},getFileDataAsTypedArray:function(t){return t.contents?t.contents.subarray?t.contents.subarray(0,t.usedBytes):new Uint8Array(t.contents):new Uint8Array(0)},expandFileStorage:function(t,e){var r=t.contents?t.contents.length:0;if(!(r>=e)){e=Math.max(e,r*(r<1048576?2:1.125)>>>0),0!=r&&(e=Math.max(e,256));var n=t.contents;t.contents=new Uint8Array(e),t.usedBytes>0&&t.contents.set(n.subarray(0,t.usedBytes),0)}},resizeFileStorage:function(t,e){if(t.usedBytes!=e)if(0==e)t.contents=null,t.usedBytes=0;else{var r=t.contents;t.contents=new Uint8Array(e),r&&t.contents.set(r.subarray(0,Math.min(e,t.usedBytes))),t.usedBytes=e}},node_ops:{getattr:function(t){var e={};return e.dev=yt.isChrdev(t.mode)?t.id:1,e.ino=t.id,e.mode=t.mode,e.nlink=1,e.uid=0,e.gid=0,e.rdev=t.rdev,yt.isDir(t.mode)?e.size=4096:yt.isFile(t.mode)?e.size=t.usedBytes:yt.isLink(t.mode)?e.size=t.link.length:e.size=0,e.atime=new Date(t.timestamp),e.mtime=new Date(t.timestamp),e.ctime=new Date(t.timestamp),e.blksize=4096,e.blocks=Math.ceil(e.size/e.blksize),e},setattr:function(t,e){void 0!==e.mode&&(t.mode=e.mode),void 0!==e.timestamp&&(t.timestamp=e.timestamp),void 0!==e.size&&ht.resizeFileStorage(t,e.size)},lookup:function(t,e){throw yt.genericErrors[44]},mknod:function(t,e,r,n){return ht.createNode(t,e,r,n)},rename:function(t,e,r){if(yt.isDir(t.mode)){var n;try{n=yt.lookupNode(e,r)}catch(t){}if(n)for(var o in n.contents)throw new yt.ErrnoError(55)}delete t.parent.contents[t.name],t.parent.timestamp=Date.now(),t.name=r,e.contents[r]=t,e.timestamp=t.parent.timestamp,t.parent=e},unlink:function(t,e){delete t.contents[e],t.timestamp=Date.now()},rmdir:function(t,e){var r=yt.lookupNode(t,e);for(var n in r.contents)throw new yt.ErrnoError(55);delete t.contents[e],t.timestamp=Date.now()},readdir:function(t){var e=[".",".."];for(var r in t.contents)t.contents.hasOwnProperty(r)&&e.push(r);return e},symlink:function(t,e,r){var n=ht.createNode(t,e,41471,0);return n.link=r,n},readlink:function(t){if(!yt.isLink(t.mode))throw new yt.ErrnoError(28);return t.link}},stream_ops:{read:function(t,e,r,n,o){var i=t.node.contents;if(o>=t.node.usedBytes)return 0;var a=Math.min(t.node.usedBytes-o,n);if(a>8&&i.subarray)e.set(i.subarray(o,o+a),r);else for(var s=0;s<a;s++)e[r+s]=i[o+s];return a},write:function(t,e,r,n,o,i){if(e.buffer===v.buffer&&(i=!1),!n)return 0;var a=t.node;if(a.timestamp=Date.now(),e.subarray&&(!a.contents||a.contents.subarray)){if(i)return a.contents=e.subarray(r,r+n),a.usedBytes=n,n;if(0===a.usedBytes&&0===o)return a.contents=e.slice(r,r+n),a.usedBytes=n,n;if(o+n<=a.usedBytes)return a.contents.set(e.subarray(r,r+n),o),n}if(ht.expandFileStorage(a,o+n),a.contents.subarray&&e.subarray)a.contents.set(e.subarray(r,r+n),o);else for(var s=0;s<n;s++)a.contents[o+s]=e[r+s];return a.usedBytes=Math.max(a.usedBytes,o+n),n},llseek:function(t,e,r){var n=e;if(1===r?n+=t.position:2===r&&yt.isFile(t.node.mode)&&(n+=t.node.usedBytes),n<0)throw new yt.ErrnoError(28);return n},allocate:function(t,e,r){ht.expandFileStorage(t.node,e+r),t.node.usedBytes=Math.max(t.node.usedBytes,e+r)},mmap:function(t,e,r,n,o){if(!yt.isFile(t.node.mode))throw new yt.ErrnoError(43);var i,a,s=t.node.contents;if(2&o||s.buffer!==v.buffer){if((r>0||r+e<s.length)&&(s=s.subarray?s.subarray(r,r+e):Array.prototype.slice.call(s,r,r+e)),a=!0,!(i=ft()))throw new yt.ErrnoError(48);v.set(s,i)}else a=!1,i=s.byteOffset;return{ptr:i,allocated:a}},msync:function(t,e,r,n,o){return ht.stream_ops.write(t,e,0,n,r,!1),0}}},pt=n.preloadPlugins||[];function dt(t,e){var r=0;return t&&(r|=365),e&&(r|=146),r}var mt={},gt={isWindows:!1,staticInit:()=>{gt.isWindows=!!process.platform.match(/^win/);var t=process.binding("constants");t.fs&&(t=t.fs),gt.flagsForNodeMap={1024:t.O_APPEND,64:t.O_CREAT,128:t.O_EXCL,256:t.O_NOCTTY,0:t.O_RDONLY,2:t.O_RDWR,4096:t.O_SYNC,512:t.O_TRUNC,1:t.O_WRONLY,131072:t.O_NOFOLLOW}},convertNodeCode:t=>{var e=t.code;return mt[e]},mount:t=>gt.createNode(null,"/",gt.getMode(t.opts.root),0),createNode:(t,e,r,n)=>{if(!yt.isDir(r)&&!yt.isFile(r)&&!yt.isLink(r))throw new yt.ErrnoError(28);var o=yt.createNode(t,e,r);return o.node_ops=gt.node_ops,o.stream_ops=gt.stream_ops,o},getMode:t=>{var e;try{e=d.lstatSync(t),gt.isWindows&&(e.mode=e.mode|(292&e.mode)>>2)}catch(t){if(!t.code)throw t;throw new yt.ErrnoError(gt.convertNodeCode(t))}return e.mode},realPath:t=>{for(var e=[];t.parent!==t;)e.push(t.name),t=t.parent;return e.push(t.mount.opts.root),e.reverse(),ot.join.apply(null,e)},flagsForNode:t=>{t&=-2097153,t&=-2049,t&=-32769,t&=-524289,t&=-65537;var e=0;for(var r in gt.flagsForNodeMap)t&r&&(e|=gt.flagsForNodeMap[r],t^=r);if(t)throw new yt.ErrnoError(28);return e},node_ops:{getattr:t=>{var e,r=gt.realPath(t);try{e=d.lstatSync(r)}catch(t){if(!t.code)throw t;throw new yt.ErrnoError(gt.convertNodeCode(t))}return gt.isWindows&&!e.blksize&&(e.blksize=4096),gt.isWindows&&!e.blocks&&(e.blocks=(e.size+e.blksize-1)/e.blksize|0),{dev:e.dev,ino:e.ino,mode:e.mode,nlink:e.nlink,uid:e.uid,gid:e.gid,rdev:e.rdev,size:e.size,atime:e.atime,mtime:e.mtime,ctime:e.ctime,blksize:e.blksize,blocks:e.blocks}},setattr:(t,e)=>{var r=gt.realPath(t);try{if(void 0!==e.mode&&(d.chmodSync(r,e.mode),t.mode=e.mode),void 0!==e.timestamp){var n=new Date(e.timestamp);d.utimesSync(r,n,n)}void 0!==e.size&&d.truncateSync(r,e.size)}catch(t){if(!t.code)throw t;throw new yt.ErrnoError(gt.convertNodeCode(t))}},lookup:(t,e)=>{var r=ot.join2(gt.realPath(t),e),n=gt.getMode(r);return gt.createNode(t,e,n)},mknod:(t,e,r,n)=>{var o=gt.createNode(t,e,r,n),i=gt.realPath(o);try{yt.isDir(o.mode)?d.mkdirSync(i,o.mode):d.writeFileSync(i,"",{mode:o.mode})}catch(t){if(!t.code)throw t;throw new yt.ErrnoError(gt.convertNodeCode(t))}return o},rename:(t,e,r)=>{var n=gt.realPath(t),o=ot.join2(gt.realPath(e),r);try{d.renameSync(n,o)}catch(t){if(!t.code)throw t;throw new yt.ErrnoError(gt.convertNodeCode(t))}t.name=r},unlink:(t,e)=>{var r=ot.join2(gt.realPath(t),e);try{d.unlinkSync(r)}catch(t){if(!t.code)throw t;throw new yt.ErrnoError(gt.convertNodeCode(t))}},rmdir:(t,e)=>{var r=ot.join2(gt.realPath(t),e);try{d.rmdirSync(r)}catch(t){if(!t.code)throw t;throw new yt.ErrnoError(gt.convertNodeCode(t))}},readdir:t=>{var e=gt.realPath(t);try{return d.readdirSync(e)}catch(t){if(!t.code)throw t;throw new yt.ErrnoError(gt.convertNodeCode(t))}},symlink:(t,e,r)=>{var n=ot.join2(gt.realPath(t),e);try{d.symlinkSync(r,n)}catch(t){if(!t.code)throw t;throw new yt.ErrnoError(gt.convertNodeCode(t))}},readlink:t=>{var e=gt.realPath(t);try{return e=d.readlinkSync(e),e=m.relative(m.resolve(t.mount.opts.root),e)}catch(t){if(!t.code)throw t;if("UNKNOWN"===t.code)throw new yt.ErrnoError(28);throw new yt.ErrnoError(gt.convertNodeCode(t))}}},stream_ops:{open:t=>{var e=gt.realPath(t.node);try{yt.isFile(t.node.mode)&&(t.nfd=d.openSync(e,gt.flagsForNode(t.flags)))}catch(t){if(!t.code)throw t;throw new yt.ErrnoError(gt.convertNodeCode(t))}},close:t=>{try{yt.isFile(t.node.mode)&&t.nfd&&d.closeSync(t.nfd)}catch(t){if(!t.code)throw t;throw new yt.ErrnoError(gt.convertNodeCode(t))}},read:(t,e,r,n,o)=>{if(0===n)return 0;try{return d.readSync(t.nfd,Buffer.from(e.buffer),r,n,o)}catch(t){throw new yt.ErrnoError(gt.convertNodeCode(t))}},write:(t,e,r,n,o)=>{try{return d.writeSync(t.nfd,Buffer.from(e.buffer),r,n,o)}catch(t){throw new yt.ErrnoError(gt.convertNodeCode(t))}},llseek:(t,e,r)=>{var n=e;if(1===r)n+=t.position;else if(2===r&&yt.isFile(t.node.mode))try{n+=d.fstatSync(t.nfd).size}catch(t){throw new yt.ErrnoError(gt.convertNodeCode(t))}if(n<0)throw new yt.ErrnoError(28);return n},mmap:(t,e,r,n,o)=>{if(!yt.isFile(t.node.mode))throw new yt.ErrnoError(43);var i=ft();return gt.stream_ops.read(t,v,i,e,r),{ptr:i,allocated:!0}},msync:(t,e,r,n,o)=>(gt.stream_ops.write(t,e,0,n,r,!1),0)}},wt={DIR_MODE:16895,FILE_MODE:33279,reader:null,mount:function(t){O(c),wt.reader||(wt.reader=new FileReaderSync);var e=wt.createNode(null,"/",wt.DIR_MODE,0),r={};function n(t){for(var n=t.split("/"),o=e,i=0;i<n.length-1;i++){var a=n.slice(0,i+1).join("/");r[a]||(r[a]=wt.createNode(o,n[i],wt.DIR_MODE,0)),o=r[a]}return o}function o(t){var e=t.split("/");return e[e.length-1]}return Array.prototype.forEach.call(t.opts.files||[],(function(t){wt.createNode(n(t.name),o(t.name),wt.FILE_MODE,0,t,t.lastModifiedDate)})),(t.opts.blobs||[]).forEach((function(t){wt.createNode(n(t.name),o(t.name),wt.FILE_MODE,0,t.data)})),(t.opts.packages||[]).forEach((function(t){t.metadata.files.forEach((function(e){var r=e.filename.substr(1);wt.createNode(n(r),o(r),wt.FILE_MODE,0,t.blob.slice(e.start,e.end))}))})),e},createNode:function(t,e,r,n,o,i){var a=yt.createNode(t,e,r);return a.mode=r,a.node_ops=wt.node_ops,a.stream_ops=wt.stream_ops,a.timestamp=(i||new Date).getTime(),O(wt.FILE_MODE!==wt.DIR_MODE),r===wt.FILE_MODE?(a.size=o.size,a.contents=o):(a.size=4096,a.contents={}),t&&(t.contents[e]=a),a},node_ops:{getattr:function(t){return{dev:1,ino:t.id,mode:t.mode,nlink:1,uid:0,gid:0,rdev:0,size:t.size,atime:new Date(t.timestamp),mtime:new Date(t.timestamp),ctime:new Date(t.timestamp),blksize:4096,blocks:Math.ceil(t.size/4096)}},setattr:function(t,e){void 0!==e.mode&&(t.mode=e.mode),void 0!==e.timestamp&&(t.timestamp=e.timestamp)},lookup:function(t,e){throw new yt.ErrnoError(44)},mknod:function(t,e,r,n){throw new yt.ErrnoError(63)},rename:function(t,e,r){throw new yt.ErrnoError(63)},unlink:function(t,e){throw new yt.ErrnoError(63)},rmdir:function(t,e){throw new yt.ErrnoError(63)},readdir:function(t){var e=[".",".."];for(var r in t.contents)t.contents.hasOwnProperty(r)&&e.push(r);return e},symlink:function(t,e,r){throw new yt.ErrnoError(63)}},stream_ops:{read:function(t,e,r,n,o){if(o>=t.node.size)return 0;var i=t.node.contents.slice(o,o+n),a=wt.reader.readAsArrayBuffer(i);return e.set(new Uint8Array(a),r),i.size},write:function(t,e,r,n,o){throw new yt.ErrnoError(29)},llseek:function(t,e,r){var n=e;if(1===r?n+=t.position:2===r&&yt.isFile(t.node.mode)&&(n+=t.node.size),n<0)throw new yt.ErrnoError(28);return n}}},yt={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath:(t,e={})=>{if(!(t=at.resolve(t)))return{path:"",node:null};if((e=Object.assign({follow_mount:!0,recurse_count:0},e)).recurse_count>8)throw new yt.ErrnoError(32);for(var r=t.split("/").filter((t=>!!t)),n=yt.root,o="/",i=0;i<r.length;i++){var a=i===r.length-1;if(a&&e.parent)break;if(n=yt.lookupNode(n,r[i]),o=ot.join2(o,r[i]),yt.isMountpoint(n)&&(!a||a&&e.follow_mount)&&(n=n.mounted.root),!a||e.follow)for(var s=0;yt.isLink(n.mode);){var u=yt.readlink(o);if(o=at.resolve(ot.dirname(o),u),n=yt.lookupPath(o,{recurse_count:e.recurse_count+1}).node,s++>40)throw new yt.ErrnoError(32)}}return{path:o,node:n}},getPath:t=>{for(var e;;){if(yt.isRoot(t)){var r=t.mount.mountpoint;return e?"/"!==r[r.length-1]?`${r}/${e}`:r+e:r}e=e?`${t.name}/${e}`:t.name,t=t.parent}},hashName:(t,e)=>{for(var r=0,n=0;n<e.length;n++)r=(r<<5)-r+e.charCodeAt(n)|0;return(t+r>>>0)%yt.nameTable.length},hashAddNode:t=>{var e=yt.hashName(t.parent.id,t.name);t.name_next=yt.nameTable[e],yt.nameTable[e]=t},hashRemoveNode:t=>{var e=yt.hashName(t.parent.id,t.name);if(yt.nameTable[e]===t)yt.nameTable[e]=t.name_next;else for(var r=yt.nameTable[e];r;){if(r.name_next===t){r.name_next=t.name_next;break}r=r.name_next}},lookupNode:(t,e)=>{var r=yt.mayLookup(t);if(r)throw new yt.ErrnoError(r,t);for(var n=yt.hashName(t.id,e),o=yt.nameTable[n];o;o=o.name_next){var i=o.name;if(o.parent.id===t.id&&i===e)return o}return yt.lookup(t,e)},createNode:(t,e,r,n)=>{var o=new yt.FSNode(t,e,r,n);return yt.hashAddNode(o),o},destroyNode:t=>{yt.hashRemoveNode(t)},isRoot:t=>t===t.parent,isMountpoint:t=>!!t.mounted,isFile:t=>32768==(61440&t),isDir:t=>16384==(61440&t),isLink:t=>40960==(61440&t),isChrdev:t=>8192==(61440&t),isBlkdev:t=>24576==(61440&t),isFIFO:t=>4096==(61440&t),isSocket:t=>49152==(49152&t),flagsToPermissionString:t=>{var e=["r","w","rw"][3&t];return 512&t&&(e+="w"),e},nodePermissions:(t,e)=>yt.ignorePermissions||(!e.includes("r")||292&t.mode)&&(!e.includes("w")||146&t.mode)&&(!e.includes("x")||73&t.mode)?0:2,mayLookup:t=>{var e=yt.nodePermissions(t,"x");return e||(t.node_ops.lookup?0:2)},mayCreate:(t,e)=>{try{return yt.lookupNode(t,e),20}catch(t){}return yt.nodePermissions(t,"wx")},mayDelete:(t,e,r)=>{var n;try{n=yt.lookupNode(t,e)}catch(t){return t.errno}var o=yt.nodePermissions(t,"wx");if(o)return o;if(r){if(!yt.isDir(n.mode))return 54;if(yt.isRoot(n)||yt.getPath(n)===yt.cwd())return 10}else if(yt.isDir(n.mode))return 31;return 0},mayOpen:(t,e)=>t?yt.isLink(t.mode)?32:yt.isDir(t.mode)&&("r"!==yt.flagsToPermissionString(e)||512&e)?31:yt.nodePermissions(t,yt.flagsToPermissionString(e)):44,MAX_OPEN_FDS:4096,nextfd:()=>{for(var t=0;t<=yt.MAX_OPEN_FDS;t++)if(!yt.streams[t])return t;throw new yt.ErrnoError(33)},getStreamChecked:t=>{var e=yt.getStream(t);if(!e)throw new yt.ErrnoError(8);return e},getStream:t=>yt.streams[t],createStream:(t,e=-1)=>(yt.FSStream||(yt.FSStream=function(){this.shared={}},yt.FSStream.prototype={},Object.defineProperties(yt.FSStream.prototype,{object:{get:function(){return this.node},set:function(t){this.node=t}},isRead:{get:function(){return 1!=(2097155&this.flags)}},isWrite:{get:function(){return 0!=(2097155&this.flags)}},isAppend:{get:function(){return 1024&this.flags}},flags:{get:function(){return this.shared.flags},set:function(t){this.shared.flags=t}},position:{get:function(){return this.shared.position},set:function(t){this.shared.position=t}}})),t=Object.assign(new yt.FSStream,t),-1==e&&(e=yt.nextfd()),t.fd=e,yt.streams[e]=t,t),closeStream:t=>{yt.streams[t]=null},chrdev_stream_ops:{open:t=>{var e=yt.getDevice(t.node.rdev);t.stream_ops=e.stream_ops,t.stream_ops.open&&t.stream_ops.open(t)},llseek:()=>{throw new yt.ErrnoError(70)}},major:t=>t>>8,minor:t=>255&t,makedev:(t,e)=>t<<8|e,registerDevice:(t,e)=>{yt.devices[t]={stream_ops:e}},getDevice:t=>yt.devices[t],getMounts:t=>{for(var e=[],r=[t];r.length;){var n=r.pop();e.push(n),r.push.apply(r,n.mounts)}return e},syncfs:(t,e)=>{"function"==typeof t&&(e=t,t=!1),yt.syncFSRequests++,yt.syncFSRequests>1&&E(`warning: ${yt.syncFSRequests} FS.syncfs operations in flight at once, probably just doing extra work`);var r=yt.getMounts(yt.root.mount),n=0;function o(t){return yt.syncFSRequests--,e(t)}function i(t){if(t)return i.errored?void 0:(i.errored=!0,o(t));++n>=r.length&&o(null)}r.forEach((e=>{if(!e.type.syncfs)return i(null);e.type.syncfs(e,t,i)}))},mount:(t,e,r)=>{var n,o="/"===r,i=!r;if(o&&yt.root)throw new yt.ErrnoError(10);if(!o&&!i){var a=yt.lookupPath(r,{follow_mount:!1});if(r=a.path,n=a.node,yt.isMountpoint(n))throw new yt.ErrnoError(10);if(!yt.isDir(n.mode))throw new yt.ErrnoError(54)}var s={type:t,opts:e,mountpoint:r,mounts:[]},u=t.mount(s);return u.mount=s,s.root=u,o?yt.root=u:n&&(n.mounted=s,n.mount&&n.mount.mounts.push(s)),u},unmount:t=>{var e=yt.lookupPath(t,{follow_mount:!1});if(!yt.isMountpoint(e.node))throw new yt.ErrnoError(28);var r=e.node,n=r.mounted,o=yt.getMounts(n);Object.keys(yt.nameTable).forEach((t=>{for(var e=yt.nameTable[t];e;){var r=e.name_next;o.includes(e.mount)&&yt.destroyNode(e),e=r}})),r.mounted=null;var i=r.mount.mounts.indexOf(n);r.mount.mounts.splice(i,1)},lookup:(t,e)=>t.node_ops.lookup(t,e),mknod:(t,e,r)=>{var n=yt.lookupPath(t,{parent:!0}).node,o=ot.basename(t);if(!o||"."===o||".."===o)throw new yt.ErrnoError(28);var i=yt.mayCreate(n,o);if(i)throw new yt.ErrnoError(i);if(!n.node_ops.mknod)throw new yt.ErrnoError(63);return n.node_ops.mknod(n,o,e,r)},create:(t,e)=>(e=void 0!==e?e:438,e&=4095,e|=32768,yt.mknod(t,e,0)),mkdir:(t,e)=>(e=void 0!==e?e:511,e&=1023,e|=16384,yt.mknod(t,e,0)),mkdirTree:(t,e)=>{for(var r=t.split("/"),n="",o=0;o<r.length;++o)if(r[o]){n+="/"+r[o];try{yt.mkdir(n,e)}catch(t){if(20!=t.errno)throw t}}},mkdev:(t,e,r)=>(void 0===r&&(r=e,e=438),e|=8192,yt.mknod(t,e,r)),symlink:(t,e)=>{if(!at.resolve(t))throw new yt.ErrnoError(44);var r=yt.lookupPath(e,{parent:!0}).node;if(!r)throw new yt.ErrnoError(44);var n=ot.basename(e),o=yt.mayCreate(r,n);if(o)throw new yt.ErrnoError(o);if(!r.node_ops.symlink)throw new yt.ErrnoError(63);return r.node_ops.symlink(r,n,t)},rename:(t,e)=>{var r,n,o=ot.dirname(t),i=ot.dirname(e),a=ot.basename(t),s=ot.basename(e);if(r=yt.lookupPath(t,{parent:!0}).node,n=yt.lookupPath(e,{parent:!0}).node,!r||!n)throw new yt.ErrnoError(44);if(r.mount!==n.mount)throw new yt.ErrnoError(75);var u,l=yt.lookupNode(r,a),c=at.relative(t,i);if("."!==c.charAt(0))throw new yt.ErrnoError(28);if("."!==(c=at.relative(e,o)).charAt(0))throw new yt.ErrnoError(55);try{u=yt.lookupNode(n,s)}catch(t){}if(l!==u){var f=yt.isDir(l.mode),h=yt.mayDelete(r,a,f);if(h)throw new yt.ErrnoError(h);if(h=u?yt.mayDelete(n,s,f):yt.mayCreate(n,s))throw new yt.ErrnoError(h);if(!r.node_ops.rename)throw new yt.ErrnoError(63);if(yt.isMountpoint(l)||u&&yt.isMountpoint(u))throw new yt.ErrnoError(10);if(n!==r&&(h=yt.nodePermissions(r,"w")))throw new yt.ErrnoError(h);yt.hashRemoveNode(l);try{r.node_ops.rename(l,n,s)}catch(t){throw t}finally{yt.hashAddNode(l)}}},rmdir:t=>{var e=yt.lookupPath(t,{parent:!0}).node,r=ot.basename(t),n=yt.lookupNode(e,r),o=yt.mayDelete(e,r,!0);if(o)throw new yt.ErrnoError(o);if(!e.node_ops.rmdir)throw new yt.ErrnoError(63);if(yt.isMountpoint(n))throw new yt.ErrnoError(10);e.node_ops.rmdir(e,r),yt.destroyNode(n)},readdir:t=>{var e=yt.lookupPath(t,{follow:!0}).node;if(!e.node_ops.readdir)throw new yt.ErrnoError(54);return e.node_ops.readdir(e)},unlink:t=>{var e=yt.lookupPath(t,{parent:!0}).node;if(!e)throw new yt.ErrnoError(44);var r=ot.basename(t),n=yt.lookupNode(e,r),o=yt.mayDelete(e,r,!1);if(o)throw new yt.ErrnoError(o);if(!e.node_ops.unlink)throw new yt.ErrnoError(63);if(yt.isMountpoint(n))throw new yt.ErrnoError(10);e.node_ops.unlink(e,r),yt.destroyNode(n)},readlink:t=>{var e=yt.lookupPath(t).node;if(!e)throw new yt.ErrnoError(44);if(!e.node_ops.readlink)throw new yt.ErrnoError(28);return at.resolve(yt.getPath(e.parent),e.node_ops.readlink(e))},stat:(t,e)=>{var r=yt.lookupPath(t,{follow:!e}).node;if(!r)throw new yt.ErrnoError(44);if(!r.node_ops.getattr)throw new yt.ErrnoError(63);return r.node_ops.getattr(r)},lstat:t=>yt.stat(t,!0),chmod:(t,e,r)=>{var n;if(!(n="string"==typeof t?yt.lookupPath(t,{follow:!r}).node:t).node_ops.setattr)throw new yt.ErrnoError(63);n.node_ops.setattr(n,{mode:4095&e|-4096&n.mode,timestamp:Date.now()})},lchmod:(t,e)=>{yt.chmod(t,e,!0)},fchmod:(t,e)=>{var r=yt.getStreamChecked(t);yt.chmod(r.node,e)},chown:(t,e,r,n)=>{var o;if(!(o="string"==typeof t?yt.lookupPath(t,{follow:!n}).node:t).node_ops.setattr)throw new yt.ErrnoError(63);o.node_ops.setattr(o,{timestamp:Date.now()})},lchown:(t,e,r)=>{yt.chown(t,e,r,!0)},fchown:(t,e,r)=>{var n=yt.getStreamChecked(t);yt.chown(n.node,e,r)},truncate:(t,e)=>{if(e<0)throw new yt.ErrnoError(28);var r;if(!(r="string"==typeof t?yt.lookupPath(t,{follow:!0}).node:t).node_ops.setattr)throw new yt.ErrnoError(63);if(yt.isDir(r.mode))throw new yt.ErrnoError(31);if(!yt.isFile(r.mode))throw new yt.ErrnoError(28);var n=yt.nodePermissions(r,"w");if(n)throw new yt.ErrnoError(n);r.node_ops.setattr(r,{size:e,timestamp:Date.now()})},ftruncate:(t,e)=>{var r=yt.getStreamChecked(t);if(0==(2097155&r.flags))throw new yt.ErrnoError(28);yt.truncate(r.node,e)},utime:(t,e,r)=>{var n=yt.lookupPath(t,{follow:!0}).node;n.node_ops.setattr(n,{timestamp:Math.max(e,r)})},open:(t,e,r)=>{if(""===t)throw new yt.ErrnoError(44);var o;if(r=void 0===r?438:r,r=64&(e="string"==typeof e?function(t){var e={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[t];if(void 0===e)throw new Error(`Unknown file open mode: ${t}`);return e}(e):e)?4095&r|32768:0,"object"==typeof t)o=t;else{t=ot.normalize(t);try{o=yt.lookupPath(t,{follow:!(131072&e)}).node}catch(t){}}var i=!1;if(64&e)if(o){if(128&e)throw new yt.ErrnoError(20)}else o=yt.mknod(t,r,0),i=!0;if(!o)throw new yt.ErrnoError(44);if(yt.isChrdev(o.mode)&&(e&=-513),65536&e&&!yt.isDir(o.mode))throw new yt.ErrnoError(54);if(!i){var a=yt.mayOpen(o,e);if(a)throw new yt.ErrnoError(a)}512&e&&!i&&yt.truncate(o,0),e&=-131713;var s=yt.createStream({node:o,path:yt.getPath(o),flags:e,seekable:!0,position:0,stream_ops:o.stream_ops,ungotten:[],error:!1});return s.stream_ops.open&&s.stream_ops.open(s),!n.logReadFiles||1&e||(yt.readFiles||(yt.readFiles={}),t in yt.readFiles||(yt.readFiles[t]=1)),s},close:t=>{if(yt.isClosed(t))throw new yt.ErrnoError(8);t.getdents&&(t.getdents=null);try{t.stream_ops.close&&t.stream_ops.close(t)}catch(t){throw t}finally{yt.closeStream(t.fd)}t.fd=null},isClosed:t=>null===t.fd,llseek:(t,e,r)=>{if(yt.isClosed(t))throw new yt.ErrnoError(8);if(!t.seekable||!t.stream_ops.llseek)throw new yt.ErrnoError(70);if(0!=r&&1!=r&&2!=r)throw new yt.ErrnoError(28);return t.position=t.stream_ops.llseek(t,e,r),t.ungotten=[],t.position},read:(t,e,r,n,o)=>{if(n<0||o<0)throw new yt.ErrnoError(28);if(yt.isClosed(t))throw new yt.ErrnoError(8);if(1==(2097155&t.flags))throw new yt.ErrnoError(8);if(yt.isDir(t.node.mode))throw new yt.ErrnoError(31);if(!t.stream_ops.read)throw new yt.ErrnoError(28);var i=void 0!==o;if(i){if(!t.seekable)throw new yt.ErrnoError(70)}else o=t.position;var a=t.stream_ops.read(t,e,r,n,o);return i||(t.position+=a),a},write:(t,e,r,n,o,i)=>{if(n<0||o<0)throw new yt.ErrnoError(28);if(yt.isClosed(t))throw new yt.ErrnoError(8);if(0==(2097155&t.flags))throw new yt.ErrnoError(8);if(yt.isDir(t.node.mode))throw new yt.ErrnoError(31);if(!t.stream_ops.write)throw new yt.ErrnoError(28);t.seekable&&1024&t.flags&&yt.llseek(t,0,2);var a=void 0!==o;if(a){if(!t.seekable)throw new yt.ErrnoError(70)}else o=t.position;var s=t.stream_ops.write(t,e,r,n,o,i);return a||(t.position+=s),s},allocate:(t,e,r)=>{if(yt.isClosed(t))throw new yt.ErrnoError(8);if(e<0||r<=0)throw new yt.ErrnoError(28);if(0==(2097155&t.flags))throw new yt.ErrnoError(8);if(!yt.isFile(t.node.mode)&&!yt.isDir(t.node.mode))throw new yt.ErrnoError(43);if(!t.stream_ops.allocate)throw new yt.ErrnoError(138);t.stream_ops.allocate(t,e,r)},mmap:(t,e,r,n,o)=>{if(0!=(2&n)&&0==(2&o)&&2!=(2097155&t.flags))throw new yt.ErrnoError(2);if(1==(2097155&t.flags))throw new yt.ErrnoError(2);if(!t.stream_ops.mmap)throw new yt.ErrnoError(43);return t.stream_ops.mmap(t,e,r,n,o)},msync:(t,e,r,n,o)=>t.stream_ops.msync?t.stream_ops.msync(t,e,r,n,o):0,munmap:t=>0,ioctl:(t,e,r)=>{if(!t.stream_ops.ioctl)throw new yt.ErrnoError(59);return t.stream_ops.ioctl(t,e,r)},readFile:(t,e={})=>{if(e.flags=e.flags||0,e.encoding=e.encoding||"binary","utf8"!==e.encoding&&"binary"!==e.encoding)throw new Error(`Invalid encoding type "${e.encoding}"`);var r,n=yt.open(t,e.flags),o=yt.stat(t).size,i=new Uint8Array(o);return yt.read(n,i,0,o,0),"utf8"===e.encoding?r=J(i,0):"binary"===e.encoding&&(r=i),yt.close(n),r},writeFile:(t,e,r={})=>{r.flags=r.flags||577;var n=yt.open(t,r.flags,r.mode);if("string"==typeof e){var o=new Uint8Array(st(e)+1),i=ut(e,o,0,o.length);yt.write(n,o,0,i,void 0,r.canOwn)}else{if(!ArrayBuffer.isView(e))throw new Error("Unsupported data type");yt.write(n,e,0,e.byteLength,void 0,r.canOwn)}yt.close(n)},cwd:()=>yt.currentPath,chdir:t=>{var e=yt.lookupPath(t,{follow:!0});if(null===e.node)throw new yt.ErrnoError(44);if(!yt.isDir(e.node.mode))throw new yt.ErrnoError(54);var r=yt.nodePermissions(e.node,"x");if(r)throw new yt.ErrnoError(r);yt.currentPath=e.path},createDefaultDirectories:()=>{yt.mkdir("/tmp"),yt.mkdir("/home"),yt.mkdir("/home/web_user")},createDefaultDevices:()=>{yt.mkdir("/dev"),yt.registerDevice(yt.makedev(1,3),{read:()=>0,write:(t,e,r,n,o)=>n}),yt.mkdev("/dev/null",yt.makedev(1,3)),ct.register(yt.makedev(5,0),ct.default_tty_ops),ct.register(yt.makedev(6,0),ct.default_tty1_ops),yt.mkdev("/dev/tty",yt.makedev(5,0)),yt.mkdev("/dev/tty1",yt.makedev(6,0));var t=new Uint8Array(1024),e=0,r=()=>(0===e&&(e=it(t).byteLength),t[--e]);yt.createDevice("/dev","random",r),yt.createDevice("/dev","urandom",r),yt.mkdir("/dev/shm"),yt.mkdir("/dev/shm/tmp")},createSpecialDirectories:()=>{yt.mkdir("/proc");var t=yt.mkdir("/proc/self");yt.mkdir("/proc/self/fd"),yt.mount({mount:()=>{var e=yt.createNode(t,"fd",16895,73);return e.node_ops={lookup:(t,e)=>{var r=+e,n=yt.getStreamChecked(r),o={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>n.path}};return o.parent=o,o}},e}},{},"/proc/self/fd")},createStandardStreams:()=>{n.stdin?yt.createDevice("/dev","stdin",n.stdin):yt.symlink("/dev/tty","/dev/stdin"),n.stdout?yt.createDevice("/dev","stdout",null,n.stdout):yt.symlink("/dev/tty","/dev/stdout"),n.stderr?yt.createDevice("/dev","stderr",null,n.stderr):yt.symlink("/dev/tty1","/dev/stderr"),yt.open("/dev/stdin",0),yt.open("/dev/stdout",1),yt.open("/dev/stderr",1)},ensureErrnoError:()=>{yt.ErrnoError||(yt.ErrnoError=function(t,e){this.name="ErrnoError",this.node=e,this.setErrno=function(t){this.errno=t},this.setErrno(t),this.message="FS error"},yt.ErrnoError.prototype=new Error,yt.ErrnoError.prototype.constructor=yt.ErrnoError,[44].forEach((t=>{yt.genericErrors[t]=new yt.ErrnoError(t),yt.genericErrors[t].stack="<generic error, no stack>"})))},staticInit:()=>{yt.ensureErrnoError(),yt.nameTable=new Array(4096),yt.mount(ht,{},"/"),yt.createDefaultDirectories(),yt.createDefaultDevices(),yt.createSpecialDirectories(),yt.filesystems={MEMFS:ht,NODEFS:gt,WORKERFS:wt}},init:(t,e,r)=>{yt.init.initialized=!0,yt.ensureErrnoError(),n.stdin=t||n.stdin,n.stdout=e||n.stdout,n.stderr=r||n.stderr,yt.createStandardStreams()},quit:()=>{yt.init.initialized=!1;for(var t=0;t<yt.streams.length;t++){var e=yt.streams[t];e&&yt.close(e)}},findObject:(t,e)=>{var r=yt.analyzePath(t,e);return r.exists?r.object:null},analyzePath:(t,e)=>{try{t=(n=yt.lookupPath(t,{follow:!e})).path}catch(t){}var r={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var n=yt.lookupPath(t,{parent:!0});r.parentExists=!0,r.parentPath=n.path,r.parentObject=n.node,r.name=ot.basename(t),n=yt.lookupPath(t,{follow:!e}),r.exists=!0,r.path=n.path,r.object=n.node,r.name=n.node.name,r.isRoot="/"===n.path}catch(t){r.error=t.errno}return r},createPath:(t,e,r,n)=>{t="string"==typeof t?t:yt.getPath(t);for(var o=e.split("/").reverse();o.length;){var i=o.pop();if(i){var a=ot.join2(t,i);try{yt.mkdir(a)}catch(t){}t=a}}return a},createFile:(t,e,r,n,o)=>{var i=ot.join2("string"==typeof t?t:yt.getPath(t),e),a=dt(n,o);return yt.create(i,a)},createDataFile:(t,e,r,n,o,i)=>{var a=e;t&&(t="string"==typeof t?t:yt.getPath(t),a=e?ot.join2(t,e):t);var s=dt(n,o),u=yt.create(a,s);if(r){if("string"==typeof r){for(var l=new Array(r.length),c=0,f=r.length;c<f;++c)l[c]=r.charCodeAt(c);r=l}yt.chmod(u,146|s);var h=yt.open(u,577);yt.write(h,r,0,r.length,0,i),yt.close(h),yt.chmod(u,s)}return u},createDevice:(t,e,r,n)=>{var o=ot.join2("string"==typeof t?t:yt.getPath(t),e),i=dt(!!r,!!n);yt.createDevice.major||(yt.createDevice.major=64);var a=yt.makedev(yt.createDevice.major++,0);return yt.registerDevice(a,{open:t=>{t.seekable=!1},close:t=>{n&&n.buffer&&n.buffer.length&&n(10)},read:(t,e,n,o,i)=>{for(var a=0,s=0;s<o;s++){var u;try{u=r()}catch(t){throw new yt.ErrnoError(29)}if(void 0===u&&0===a)throw new yt.ErrnoError(6);if(null==u)break;a++,e[n+s]=u}return a&&(t.node.timestamp=Date.now()),a},write:(t,e,r,o,i)=>{for(var a=0;a<o;a++)try{n(e[r+a])}catch(t){throw new yt.ErrnoError(29)}return o&&(t.node.timestamp=Date.now()),a}}),yt.mkdev(o,i,a)},forceLoadFile:t=>{if(t.isDevice||t.isFolder||t.link||t.contents)return!0;if("undefined"!=typeof XMLHttpRequest)throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(!o)throw new Error("Cannot load without read() or XMLHttpRequest.");try{t.contents=lt(o(t.url),!0),t.usedBytes=t.contents.length}catch(t){throw new yt.ErrnoError(29)}},createLazyFile:(t,e,r,n,o)=>{function i(){this.lengthKnown=!1,this.chunks=[]}if(i.prototype.get=function(t){if(!(t>this.length-1||t<0)){var e=t%this.chunkSize,r=t/this.chunkSize|0;return this.getter(r)[e]}},i.prototype.setDataGetter=function(t){this.getter=t},i.prototype.cacheLength=function(){var t=new XMLHttpRequest;if(t.open("HEAD",r,!1),t.send(null),!(t.status>=200&&t.status<300||304===t.status))throw new Error("Couldn't load "+r+". Status: "+t.status);var e,n=Number(t.getResponseHeader("Content-length")),o=(e=t.getResponseHeader("Accept-Ranges"))&&"bytes"===e,i=(e=t.getResponseHeader("Content-Encoding"))&&"gzip"===e,a=1048576;o||(a=n);var s=this;s.setDataGetter((t=>{var e=t*a,o=(t+1)*a-1;if(o=Math.min(o,n-1),void 0===s.chunks[t]&&(s.chunks[t]=((t,e)=>{if(t>e)throw new Error("invalid range ("+t+", "+e+") or no bytes requested!");if(e>n-1)throw new Error("only "+n+" bytes available! programmer error!");var o=new XMLHttpRequest;if(o.open("GET",r,!1),n!==a&&o.setRequestHeader("Range","bytes="+t+"-"+e),o.responseType="arraybuffer",o.overrideMimeType&&o.overrideMimeType("text/plain; charset=x-user-defined"),o.send(null),!(o.status>=200&&o.status<300||304===o.status))throw new Error("Couldn't load "+r+". Status: "+o.status);return void 0!==o.response?new Uint8Array(o.response||[]):lt(o.responseText||"",!0)})(e,o)),void 0===s.chunks[t])throw new Error("doXHR failed!");return s.chunks[t]})),!i&&n||(a=n=1,n=this.getter(0).length,a=n,y("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=n,this._chunkSize=a,this.lengthKnown=!0},"undefined"!=typeof XMLHttpRequest){if(!c)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var a=new i;Object.defineProperties(a,{length:{get:function(){return this.lengthKnown||this.cacheLength(),this._length}},chunkSize:{get:function(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}});var s={isDevice:!1,contents:a}}else s={isDevice:!1,url:r};var u=yt.createFile(t,e,s,n,o);s.contents?u.contents=s.contents:s.url&&(u.contents=null,u.url=s.url),Object.defineProperties(u,{usedBytes:{get:function(){return this.contents.length}}});var l={};function f(t,e,r,n,o){var i=t.node.contents;if(o>=i.length)return 0;var a=Math.min(i.length-o,n);if(i.slice)for(var s=0;s<a;s++)e[r+s]=i[o+s];else for(s=0;s<a;s++)e[r+s]=i.get(o+s);return a}return Object.keys(u.stream_ops).forEach((t=>{var e=u.stream_ops[t];l[t]=function(){return yt.forceLoadFile(u),e.apply(null,arguments)}})),l.read=(t,e,r,n,o)=>(yt.forceLoadFile(u),f(t,e,r,n,o)),l.mmap=(t,e,r,n,o)=>{yt.forceLoadFile(u);var i=ft();if(!i)throw new yt.ErrnoError(48);return f(t,v,i,e,r),{ptr:i,allocated:!0}},u.stream_ops=l,u}},Et=t=>t%4==0&&(t%100!=0||t%400==0),vt=[31,29,31,30,31,30,31,31,30,31,30,31],_t=[31,28,31,30,31,30,31,31,30,31,30,31],St=(t,e)=>{v.set(t,e)},bt=(t,e,r,n)=>{var o=S[n+40>>2],i={tm_sec:S[n>>2],tm_min:S[n+4>>2],tm_hour:S[n+8>>2],tm_mday:S[n+12>>2],tm_mon:S[n+16>>2],tm_year:S[n+20>>2],tm_wday:S[n+24>>2],tm_yday:S[n+28>>2],tm_isdst:S[n+32>>2],tm_gmtoff:S[n+36>>2],tm_zone:o?H(o):""},a=H(r),s={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var u in s)a=a.replace(new RegExp(u,"g"),s[u]);var l=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],c=["January","February","March","April","May","June","July","August","September","October","November","December"];function f(t,e,r){for(var n="number"==typeof t?t.toString():t||"";n.length<e;)n=r[0]+n;return n}function h(t,e){return f(t,e,"0")}function p(t,e){function r(t){return t<0?-1:t>0?1:0}var n;return 0===(n=r(t.getFullYear()-e.getFullYear()))&&0===(n=r(t.getMonth()-e.getMonth()))&&(n=r(t.getDate()-e.getDate())),n}function d(t){switch(t.getDay()){case 0:return new Date(t.getFullYear()-1,11,29);case 1:return t;case 2:return new Date(t.getFullYear(),0,3);case 3:return new Date(t.getFullYear(),0,2);case 4:return new Date(t.getFullYear(),0,1);case 5:return new Date(t.getFullYear()-1,11,31);case 6:return new Date(t.getFullYear()-1,11,30)}}function m(t){var e=((t,e)=>{for(var r=new Date(t.getTime());e>0;){var n=Et(r.getFullYear()),o=r.getMonth(),i=(n?vt:_t)[o];if(!(e>i-r.getDate()))return r.setDate(r.getDate()+e),r;e-=i-r.getDate()+1,r.setDate(1),o<11?r.setMonth(o+1):(r.setMonth(0),r.setFullYear(r.getFullYear()+1))}return r})(new Date(t.tm_year+1900,0,1),t.tm_yday),r=new Date(e.getFullYear(),0,4),n=new Date(e.getFullYear()+1,0,4),o=d(r),i=d(n);return p(o,e)<=0?p(i,e)<=0?e.getFullYear()+1:e.getFullYear():e.getFullYear()-1}var g={"%a":t=>l[t.tm_wday].substring(0,3),"%A":t=>l[t.tm_wday],"%b":t=>c[t.tm_mon].substring(0,3),"%B":t=>c[t.tm_mon],"%C":t=>h((t.tm_year+1900)/100|0,2),"%d":t=>h(t.tm_mday,2),"%e":t=>f(t.tm_mday,2," "),"%g":t=>m(t).toString().substring(2),"%G":t=>m(t),"%H":t=>h(t.tm_hour,2),"%I":t=>{var e=t.tm_hour;return 0==e?e=12:e>12&&(e-=12),h(e,2)},"%j":t=>h(t.tm_mday+((t,e)=>{for(var r=0,n=0;n<=e;r+=t[n++]);return r})(Et(t.tm_year+1900)?vt:_t,t.tm_mon-1),3),"%m":t=>h(t.tm_mon+1,2),"%M":t=>h(t.tm_min,2),"%n":()=>"\n","%p":t=>t.tm_hour>=0&&t.tm_hour<12?"AM":"PM","%S":t=>h(t.tm_sec,2),"%t":()=>"\t","%u":t=>t.tm_wday||7,"%U":t=>{var e=t.tm_yday+7-t.tm_wday;return h(Math.floor(e/7),2)},"%V":t=>{var e=Math.floor((t.tm_yday+7-(t.tm_wday+6)%7)/7);if((t.tm_wday+371-t.tm_yday-2)%7<=2&&e++,e){if(53==e){var r=(t.tm_wday+371-t.tm_yday)%7;4==r||3==r&&Et(t.tm_year)||(e=1)}}else{e=52;var n=(t.tm_wday+7-t.tm_yday-1)%7;(4==n||5==n&&Et(t.tm_year%400-1))&&e++}return h(e,2)},"%w":t=>t.tm_wday,"%W":t=>{var e=t.tm_yday+7-(t.tm_wday+6)%7;return h(Math.floor(e/7),2)},"%y":t=>(t.tm_year+1900).toString().substring(2),"%Y":t=>t.tm_year+1900,"%z":t=>{var e=t.tm_gmtoff,r=e>=0;return e=(e=Math.abs(e)/60)/60*100+e%60,(r?"+":"-")+String("0000"+e).slice(-4)},"%Z":t=>t.tm_zone,"%%":()=>"%"};for(var u in a=a.replace(/%%/g,"\0\0"),g)a.includes(u)&&(a=a.replace(new RegExp(u,"g"),g[u](i)));var w=lt(a=a.replace(/\0\0/g,"%"),!1);return w.length>e?0:(St(w,t),w.length-1)},kt=[],Mt=t=>{var e=kt[t];return e||(t>=kt.length&&(kt.length=t+1),kt[t]=e=k.get(t)),e};function Ot(t){return n["_"+t]}var Pt=(t,e,r)=>ut(t,_,e,r),Nt=function(t,e,r,n,o){var i={string:t=>{var e=0;return null!=t&&0!==t&&(e=(t=>{var e=st(t)+1,r=Wt(e);return Pt(t,r,e),r})(t)),e},array:t=>{var e=Wt(t.length);return St(t,e),e}},a=Ot(t),s=[],u=0;if(n)for(var l=0;l<n.length;l++){var c=i[r[l]];c?(0===u&&(u=xt()),s[l]=c(n[l])):s[l]=n[l]}var f=a.apply(null,s);return f=function(t){return 0!==u&&Bt(u),function(t){return"string"===e?H(t):"boolean"===e?Boolean(t):t}(t)}(f)},Gt=function(t,e,r,n){t||(t=this),this.parent=t,this.mount=t.mount,this.mounted=null,this.id=yt.nextInode++,this.name=e,this.mode=r,this.node_ops={},this.stream_ops={},this.rdev=n},Tt=365,It=146;Object.defineProperties(Gt.prototype,{read:{get:function(){return(this.mode&Tt)===Tt},set:function(t){t?this.mode|=Tt:this.mode&=-366}},write:{get:function(){return(this.mode&It)===It},set:function(t){t?this.mode|=It:this.mode&=-147}},isFolder:{get:function(){return yt.isDir(this.mode)}},isDevice:{get:function(){return yt.isChrdev(this.mode)}}}),yt.FSNode=Gt,yt.createPreloadedFile=function(t,e,r,n,o,a,s,u,l,c){var f=e?at.resolve(ot.join2(t,e)):t;function h(r){function i(r){c&&c(),u||yt.createDataFile(t,e,r,n,o,l),a&&a(),L()}(function(t,e,r,n){"undefined"!=typeof Browser&&Browser.init();var o=!1;return pt.forEach((function(i){o||i.canHandle(e)&&(i.handle(t,e,r,n),o=!0)})),o})(r,f,i,(()=>{s&&s(),L()}))||i(r)}R(),"string"==typeof r?((t,e,r,n)=>{var o=n?"":`al ${t}`;i(t,(r=>{O(r,`Loading data file "${t}" failed (no arrayBuffer).`),e(new Uint8Array(r)),o&&L()}),(e=>{if(!r)throw`Loading data file "${t}" failed.`;r()})),o&&R()})(r,(t=>h(t)),s):h(r)},yt.staticInit(),n.FS_createPath=yt.createPath,n.FS_createDataFile=yt.createDataFile,n.FS_createPreloadedFile=yt.createPreloadedFile,n.FS_unlink=yt.unlink,n.FS_createLazyFile=yt.createLazyFile,n.FS_createDevice=yt.createDevice,f&&gt.staticInit(),mt={EPERM:63,ENOENT:44,ESRCH:71,EINTR:27,EIO:29,ENXIO:60,E2BIG:1,ENOEXEC:45,EBADF:8,ECHILD:12,EAGAIN:6,EWOULDBLOCK:6,ENOMEM:48,EACCES:2,EFAULT:21,ENOTBLK:105,EBUSY:10,EEXIST:20,EXDEV:75,ENODEV:43,ENOTDIR:54,EISDIR:31,EINVAL:28,ENFILE:41,EMFILE:33,ENOTTY:59,ETXTBSY:74,EFBIG:22,ENOSPC:51,ESPIPE:70,EROFS:69,EMLINK:34,EPIPE:64,EDOM:18,ERANGE:68,ENOMSG:49,EIDRM:24,ECHRNG:106,EL2NSYNC:156,EL3HLT:107,EL3RST:108,ELNRNG:109,EUNATCH:110,ENOCSI:111,EL2HLT:112,EDEADLK:16,ENOLCK:46,EBADE:113,EBADR:114,EXFULL:115,ENOANO:104,EBADRQC:103,EBADSLT:102,EDEADLOCK:16,EBFONT:101,ENOSTR:100,ENODATA:116,ETIME:117,ENOSR:118,ENONET:119,ENOPKG:120,EREMOTE:121,ENOLINK:47,EADV:122,ESRMNT:123,ECOMM:124,EPROTO:65,EMULTIHOP:36,EDOTDOT:125,EBADMSG:9,ENOTUNIQ:126,EBADFD:127,EREMCHG:128,ELIBACC:129,ELIBBAD:130,ELIBSCN:131,ELIBMAX:132,ELIBEXEC:133,ENOSYS:52,ENOTEMPTY:55,ENAMETOOLONG:37,ELOOP:32,EOPNOTSUPP:138,EPFNOSUPPORT:139,ECONNRESET:15,ENOBUFS:42,EAFNOSUPPORT:5,EPROTOTYPE:67,ENOTSOCK:57,ENOPROTOOPT:50,ESHUTDOWN:140,ECONNREFUSED:14,EADDRINUSE:3,ECONNABORTED:13,ENETUNREACH:40,ENETDOWN:38,ETIMEDOUT:73,EHOSTDOWN:142,EHOSTUNREACH:23,EINPROGRESS:26,EALREADY:7,EDESTADDRREQ:17,EMSGSIZE:35,EPROTONOSUPPORT:66,ESOCKTNOSUPPORT:137,EADDRNOTAVAIL:4,ENETRESET:39,EISCONN:30,ENOTCONN:53,ETOOMANYREFS:141,EUSERS:136,EDQUOT:19,ESTALE:72,ENOTSUP:138,ENOMEDIUM:148,EILSEQ:25,EOVERFLOW:61,ECANCELED:11,ENOTRECOVERABLE:56,EOWNERDEAD:62,ESTRPIPE:135};var Ft={f:(t,e,r,n)=>{D(`Assertion failed: ${H(t)}, at: `+[e?H(e):"unknown filename",r,n?H(n):"unknown function"])},n:function(t){var e=new q(t);return e.get_caught()||(e.set_caught(!0),Y--),e.set_rethrown(!1),V.push(e),Ct(e.excPtr),e.get_exception_ptr()},o:function(){Lt(0);var t=V.pop();Zt(t.excPtr),K=0},a:$,i:Q,p:tt,L:function(){var t=V.pop();t||D("no exception to throw");var e=t.excPtr;throw t.get_rethrown()||(V.push(t),t.set_rethrown(!0),t.set_caught(!1),Y++),K=e},s:function(t,e,r){throw new q(t).init(e,r),Y++,K=t},X:function(){return Y},b:function(t){throw K||(K=t),K},I:()=>{D("")},$:(t,e,r)=>_.copyWithin(t,e,e+r),aa:t=>{var e=_.length,r=2147483648;if((t>>>=0)>r)return!1;for(var n,o,i=1;i<=4;i*=2){var a=e*(1+.2/i);a=Math.min(a,t+100663296);var s=Math.min(r,(n=Math.max(t,a))+((o=65536)-n%o)%o);if(et(s))return!0}return!1},Z:(t,e)=>{var r=0;return nt().forEach((function(n,o){var i=e+r;b[t+4*o>>2]=i,((t,e)=>{for(var r=0;r<t.length;++r)v[e++>>0]=t.charCodeAt(r);v[e>>0]=0})(n,i),r+=n.length+1})),0},_:(t,e)=>{var r=nt();b[t>>2]=r.length;var n=0;return r.forEach((function(t){n+=t.length+1})),b[e>>2]=n,0},T:(t,e)=>(it(_.subarray(t,t+e)),0),F:function(t,e){var r=xt();try{return Mt(t)(e)}catch(t){if(Bt(r),t!==t+0)throw t;Lt(1,0)}},A:function(t,e,r){var n=xt();try{return Mt(t)(e,r)}catch(t){if(Bt(n),t!==t+0)throw t;Lt(1,0)}},O:function(t,e,r,n){var o=xt();try{return Mt(t)(e,r,n)}catch(t){if(Bt(o),t!==t+0)throw t;Lt(1,0)}},P:function(t,e,r,n){var o=xt();try{return Mt(t)(e,r,n)}catch(t){if(Bt(o),t!==t+0)throw t;Lt(1,0)}},r:function(t){var e=xt();try{return Mt(t)()}catch(t){if(Bt(e),t!==t+0)throw t;Lt(1,0)}},c:function(t,e){var r=xt();try{return Mt(t)(e)}catch(t){if(Bt(r),t!==t+0)throw t;Lt(1,0)}},t:function(t,e,r){var n=xt();try{return Mt(t)(e,r)}catch(t){if(Bt(n),t!==t+0)throw t;Lt(1,0)}},J:function(t,e,r,n){var o=xt();try{return Mt(t)(e,r,n)}catch(t){if(Bt(o),t!==t+0)throw t;Lt(1,0)}},d:function(t,e,r){var n=xt();try{return Mt(t)(e,r)}catch(t){if(Bt(n),t!==t+0)throw t;Lt(1,0)}},z:function(t,e,r,n){var o=xt();try{return Mt(t)(e,r,n)}catch(t){if(Bt(o),t!==t+0)throw t;Lt(1,0)}},g:function(t,e,r,n){var o=xt();try{return Mt(t)(e,r,n)}catch(t){if(Bt(o),t!==t+0)throw t;Lt(1,0)}},K:function(t,e,r,n,o){var i=xt();try{return Mt(t)(e,r,n,o)}catch(t){if(Bt(i),t!==t+0)throw t;Lt(1,0)}},m:function(t,e,r,n,o){var i=xt();try{return Mt(t)(e,r,n,o)}catch(t){if(Bt(i),t!==t+0)throw t;Lt(1,0)}},W:function(t,e,r,n,o,i){var a=xt();try{return Mt(t)(e,r,n,o,i)}catch(t){if(Bt(a),t!==t+0)throw t;Lt(1,0)}},v:function(t,e,r,n,o,i){var a=xt();try{return Mt(t)(e,r,n,o,i)}catch(t){if(Bt(a),t!==t+0)throw t;Lt(1,0)}},w:function(t,e,r,n,o,i,a){var s=xt();try{return Mt(t)(e,r,n,o,i,a)}catch(t){if(Bt(s),t!==t+0)throw t;Lt(1,0)}},M:function(t,e,r,n,o,i,a,s){var u=xt();try{return Mt(t)(e,r,n,o,i,a,s)}catch(t){if(Bt(u),t!==t+0)throw t;Lt(1,0)}},C:function(t,e,r,n,o,i,a,s,u,l,c,f){var h=xt();try{return Mt(t)(e,r,n,o,i,a,s,u,l,c,f)}catch(t){if(Bt(h),t!==t+0)throw t;Lt(1,0)}},Q:function(t,e,r,n,o){var i=xt();try{return Jt(t,e,r,n,o)}catch(t){if(Bt(i),t!==t+0)throw t;Lt(1,0)}},S:function(t,e,r,n,o){var i=xt();try{return Ut(t,e,r,n,o)}catch(t){if(Bt(i),t!==t+0)throw t;Lt(1,0)}},j:function(t){var e=xt();try{Mt(t)()}catch(t){if(Bt(e),t!==t+0)throw t;Lt(1,0)}},k:function(t,e){var r=xt();try{Mt(t)(e)}catch(t){if(Bt(r),t!==t+0)throw t;Lt(1,0)}},H:function(t,e,r){var n=xt();try{Mt(t)(e,r)}catch(t){if(Bt(n),t!==t+0)throw t;Lt(1,0)}},V:function(t,e,r,n,o){var i=xt();try{Mt(t)(e,r,n,o)}catch(t){if(Bt(i),t!==t+0)throw t;Lt(1,0)}},e:function(t,e,r){var n=xt();try{Mt(t)(e,r)}catch(t){if(Bt(n),t!==t+0)throw t;Lt(1,0)}},N:function(t,e,r,n){var o=xt();try{Mt(t)(e,r,n)}catch(t){if(Bt(o),t!==t+0)throw t;Lt(1,0)}},D:function(t,e,r,n,o){var i=xt();try{Mt(t)(e,r,n,o)}catch(t){if(Bt(i),t!==t+0)throw t;Lt(1,0)}},y:function(t,e,r,n,o,i,a){var s=xt();try{Mt(t)(e,r,n,o,i,a)}catch(t){if(Bt(s),t!==t+0)throw t;Lt(1,0)}},h:function(t,e,r,n){var o=xt();try{Mt(t)(e,r,n)}catch(t){if(Bt(o),t!==t+0)throw t;Lt(1,0)}},E:function(t,e,r,n,o){var i=xt();try{Mt(t)(e,r,n,o)}catch(t){if(Bt(i),t!==t+0)throw t;Lt(1,0)}},U:function(t,e,r,n,o,i){var a=xt();try{Mt(t)(e,r,n,o,i)}catch(t){if(Bt(a),t!==t+0)throw t;Lt(1,0)}},l:function(t,e,r,n,o){var i=xt();try{Mt(t)(e,r,n,o)}catch(t){if(Bt(i),t!==t+0)throw t;Lt(1,0)}},G:function(t,e,r,n,o,i){var a=xt();try{Mt(t)(e,r,n,o,i)}catch(t){if(Bt(a),t!==t+0)throw t;Lt(1,0)}},u:function(t,e,r,n,o,i,a,s){var u=xt();try{Mt(t)(e,r,n,o,i,a,s)}catch(t){if(Bt(u),t!==t+0)throw t;Lt(1,0)}},x:function(t,e,r,n,o,i,a,s,u,l,c){var f=xt();try{Mt(t)(e,r,n,o,i,a,s,u,l,c)}catch(t){if(Bt(f),t!==t+0)throw t;Lt(1,0)}},B:function(t,e,r,n,o,i,a,s,u,l,c,f,h,p,d,m){var g=xt();try{Mt(t)(e,r,n,o,i,a,s,u,l,c,f,h,p,d,m)}catch(t){if(Bt(g),t!==t+0)throw t;Lt(1,0)}},R:function(t,e,r,n,o,i,a){var s=xt();try{jt(t,e,r,n,o,i,a)}catch(t){if(Bt(s),t!==t+0)throw t;Lt(1,0)}},q:function(t){return t},Y:(t,e,r,n,o)=>bt(t,e,r,n)};!function(){var t,e,o,i,a={a:Ft};function s(t,e){var r,o=t.exports;return n.asm=o,w=n.asm.ba,P(),k=n.asm.Ea,r=n.asm.ca,G.unshift(r),L(),o}if(R(),n.instantiateWasm)try{return n.instantiateWasm(a,s)}catch(t){E("Module.instantiateWasm callback failed with error: "+t),r(t)}(t=g,e=x,o=a,i=function(t){s(t.instance)},t||"function"!=typeof WebAssembly.instantiateStreaming||C(e)||Z(e)||f||"function"!=typeof fetch?z(e,o,i):fetch(e,{credentials:"same-origin"}).then((t=>WebAssembly.instantiateStreaming(t,o).then(i,(function(t){return E("wasm streaming compile failed: "+t),E("falling back to ArrayBuffer instantiation"),z(e,o,i)}))))).catch(r)}(),n._initGEOS=function(){return(n._initGEOS=n.asm.da).apply(null,arguments)},n._finishGEOS=function(){return(n._finishGEOS=n.asm.ea).apply(null,arguments)},n._GEOSFree=function(){return(n._GEOSFree=n.asm.fa).apply(null,arguments)},n._GEOSGeomFromWKT=function(){return(n._GEOSGeomFromWKT=n.asm.ga).apply(null,arguments)},n._GEOSGeomToWKT=function(){return(n._GEOSGeomToWKT=n.asm.ha).apply(null,arguments)},n._GEOSGeomToWKB_buf=function(){return(n._GEOSGeomToWKB_buf=n.asm.ia).apply(null,arguments)},n._GEOSGeomFromWKB_buf=function(){return(n._GEOSGeomFromWKB_buf=n.asm.ja).apply(null,arguments)},n._GEOSBuffer=function(){return(n._GEOSBuffer=n.asm.ka).apply(null,arguments)},n._GEOSGeom_destroy=function(){return(n._GEOSGeom_destroy=n.asm.la).apply(null,arguments)},n._GEOSBufferParams_create=function(){return(n._GEOSBufferParams_create=n.asm.ma).apply(null,arguments)},n._GEOSBufferParams_destroy=function(){return(n._GEOSBufferParams_destroy=n.asm.na).apply(null,arguments)},n._GEOSBufferParams_setEndCapStyle=function(){return(n._GEOSBufferParams_setEndCapStyle=n.asm.oa).apply(null,arguments)},n._GEOSBufferParams_setJoinStyle=function(){return(n._GEOSBufferParams_setJoinStyle=n.asm.pa).apply(null,arguments)},n._GEOSBufferParams_setMitreLimit=function(){return(n._GEOSBufferParams_setMitreLimit=n.asm.qa).apply(null,arguments)},n._GEOSBufferParams_setQuadrantSegments=function(){return(n._GEOSBufferParams_setQuadrantSegments=n.asm.ra).apply(null,arguments)},n._GEOSBufferParams_setSingleSided=function(){return(n._GEOSBufferParams_setSingleSided=n.asm.sa).apply(null,arguments)},n._GEOSBufferWithParams=function(){return(n._GEOSBufferWithParams=n.asm.ta).apply(null,arguments)},n._malloc=function(){return(n._malloc=n.asm.ua).apply(null,arguments)};var Rt,Lt=function(){return(Lt=n.asm.va).apply(null,arguments)},Dt=function(){return(Dt=n.asm.wa).apply(null,arguments)},xt=function(){return(xt=n.asm.xa).apply(null,arguments)},Bt=function(){return(Bt=n.asm.ya).apply(null,arguments)},Wt=function(){return(Wt=n.asm.za).apply(null,arguments)},Ct=function(){return(Ct=n.asm.Aa).apply(null,arguments)},Zt=function(){return(Zt=n.asm.Ba).apply(null,arguments)},At=function(){return(At=n.asm.Ca).apply(null,arguments)},zt=function(){return(zt=n.asm.Da).apply(null,arguments)},Ut=n.dynCall_jiiii=function(){return(Ut=n.dynCall_jiiii=n.asm.Fa).apply(null,arguments)},jt=n.dynCall_viijii=function(){return(jt=n.dynCall_viijii=n.asm.Ga).apply(null,arguments)},Jt=n.dynCall_iiji=function(){return(Jt=n.dynCall_iiji=n.asm.Ha).apply(null,arguments)};function Ht(){function t(){Rt||(Rt=!0,n.calledRun=!0,M||(n.noFSInit||yt.init.initialized||yt.init(),yt.ignorePermissions=!1,U(G),e(n),n.onRuntimeInitialized&&n.onRuntimeInitialized(),function(){if(n.postRun)for("function"==typeof n.postRun&&(n.postRun=[n.postRun]);n.postRun.length;)t=n.postRun.shift(),T.unshift(t);var t;U(T)}()))}I>0||(function(){if(n.preRun)for("function"==typeof n.preRun&&(n.preRun=[n.preRun]);n.preRun.length;)t=n.preRun.shift(),N.unshift(t);var t;U(N)}(),I>0||(n.setStatus?(n.setStatus("Running..."),setTimeout((function(){setTimeout((function(){n.setStatus("")}),1),t()}),1)):t()))}if(n.addRunDependency=R,n.removeRunDependency=L,n.FS_createPath=yt.createPath,n.FS_createDataFile=yt.createDataFile,n.FS_createLazyFile=yt.createLazyFile,n.FS_createDevice=yt.createDevice,n.FS_unlink=yt.unlink,n.ccall=Nt,n.cwrap=function(t,e,r,n){var o=!r||r.every((t=>"number"===t||"boolean"===t));return"string"!==e&&o&&!n?Ot(t):function(){return Nt(t,e,r,arguments)}},n.UTF8ToString=H,n.stringToUTF8=Pt,n.FS_createPreloadedFile=yt.createPreloadedFile,F=function t(){Rt||Ht(),Rt||(F=t)},n.preInit)for("function"==typeof n.preInit&&(n.preInit=[n.preInit]);n.preInit.length>0;)n.preInit.pop()();return Ht(),t.ready});let Oe;function Pe(t={}){return Oe||(Oe=new Promise(((r,n)=>{const o=e.Module;o.print=function(t){console.debug(`geos stdout: ${t}`)},o.printErr=function(t){console.error(`geos stderr: ${t}`)},o.onRuntimeInitialized=function(){try{!function(){if(e.initGEOS)return;const t=e.Module;t.ccall("initGEOS",null,["string","string"],["GEOS_INIT_NOTICE=NO","GEOS_ENABLE_TESTS=NO"]),e.initGEOS=t.cwrap("initGEOS",null,["string","string"]),e.GEOSGeomFromWKB_buf=t.cwrap("GEOSGeomFromWKB_buf","number",["number","number"]),e.GEOSGeomToWKB_buf=t.cwrap("GEOSGeomToWKB_buf","number",["number","number"]),e.GEOSGeomToWKT=t.cwrap("GEOSGeomToWKT","number",["number"]),e.GEOSGeomFromWKT=t.cwrap("GEOSGeomFromWKT","number",["number"]),e.GEOSBuffer=t.cwrap("GEOSBuffer","number",["number","number","number"]),e.GEOSBufferWithParams=t.cwrap("GEOSBufferWithParams","number",["number","number","number"]),e.GEOSBufferParams_create=t.cwrap("GEOSBufferParams_create","number",[null]),e.GEOSBufferParams_destroy=t.cwrap("GEOSBufferParams_create","number",["number"]),e.GEOSBufferParams_setEndCapStyle=t.cwrap("GEOSBufferParams_setEndCapStyle",null,["number"]),e.GEOSBufferParams_setJoinStyle=t.cwrap("GEOSBufferParams_setJoinStyle",null,["number"]),e.GEOSBufferParams_setMitreLimit=t.cwrap("GEOSBufferParams_setMitreLimit",null,["number"]),e.GEOSBufferParams_setQuadrantSegments=t.cwrap("GEOSBufferParams_setQuadrantSegments",null,["number"]),e.GEOSBufferParams_setSingleSided=t.cwrap("GEOSBufferParams_setSingleSided",null,["boolean"]),e.GEOSFree=t.cwrap("GEOSFree",null,["number"]),e.GEOSGeom_destroy=t.cwrap("GEOSGeom_destroy",null,["number"])}()}catch(t){console.log("error initializing geos.js",t)}},o.destroy=function(){e.finishGEOS()},o.locateFile=t.locateFile,Me(e.Module).then((t=>{r(ke)}))})),Oe)}export{Pe as default};
